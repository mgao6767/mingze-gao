<!DOCTYPE html>
<html lang="en"><head>
<link href="../../../../images/favicon.png" rel="icon" type="image/png">
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.47">

  <meta name="author" content="Dr.&nbsp;Mingze Gao">
  <meta name="dcterms.date" content="2024-09-11">
  <title>Mingze Gao – AFIN8003 Week 8 - Credit Risk II: Loan Portfolio and Concentration Risk</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="../../../../site_libs/revealjs/dist/theme/quarto.css">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-1QDTTQ6EHM"></script>

  <script type="text/javascript">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-1QDTTQ6EHM', { 'anonymize_ip': true});
  </script>
  <link href="../../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="../../../../site_libs/quarto-diagram/mermaid-postprocess-shim.js"></script>
<meta name="twitter:title" content="AFIN8003 Week 8 - Credit Risk II: Loan Portfolio and Concentration Risk – Mingze Gao">
<meta name="twitter:description" content="Banking and Financial Intermediation">
<meta name="twitter:card" content="summary">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="../../../../_extensions/mgao6767/mq/MQ-diag-full.png" data-background-position="60% 105%" data-background-size="120% 25%" class="quarto-title-block center">
  <h1 class="title">AFIN8003 Week 8 - Credit Risk II: Loan Portfolio and Concentration Risk</h1>
  <p class="subtitle">Banking and Financial Intermediation</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Dr.&nbsp;Mingze Gao 
</div>
        <p class="quarto-title-affiliation">
            Department of Applied Finance
          </p>
    </div>
</div>

  <p class="date">2024-09-11</p>
</section>
<section>
<section id="credit-risk-ii-loan-portfolio-and-concentration-risk" class="title-slide slide level1 center">
<h1>Credit Risk II: Loan Portfolio and Concentration Risk</h1>

</section>
<section id="introduction" class="slide level2">
<h2>Introduction</h2>
<ul>
<li>In <a href="https://mingze-gao.com/teaching/AFIN8003/2024S2/Week6/">Week 6</a>, we discussed alternative ways by which FI managers can measure the default (credit) risk on <em>individual</em> loans.</li>
<li>FIs typically hold a portfolio of loans and hence credit risk should also be measured and managed in a portfolio context.</li>
<li>This week, we discuss several models used by FI managers to assess the risk of the overall loan portfolio.</li>
<li>We will also discuss the use of derivatives to manage credit risk.</li>
</ul>
</section></section>
<section>
<section id="simple-models-of-loan-concentration-risk" class="title-slide slide level1 center">
<h1>Simple models of loan concentration risk</h1>

</section>
<section id="simple-models" class="slide level2">
<h2>Simple models</h2>
<div class="callout callout-caution callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Caution</strong></p>
</div>
<div class="callout-content">
<p>A large credit risk exposure to a single borrower or group of related borrowers poses a potential threat to a bank’s safety and soundness.</p>
</div>
</div>
</div>
<ul>
<li>Regulations are in place to limit such exposure.</li>
<li>As a result, individual loans rarely cause material losses or bank failures.</li>
<li>Primary cause of credit-related distress is that pools of individual loans sharing similar characteristics perform similarly, especially during extreme conditions.</li>
<li>An important lesson learned is that products exposed to the same types of risks can have different names and under different business units.</li>
</ul>
<p>Two simple models widely employed to measure credit risk concentration in the loan portfolio:</p>
<ol type="1">
<li>Migration analysis</li>
<li>Concentration limits</li>
</ol>
</section>
<section id="simple-model-migration-analysis" class="slide level2">
<h2>Simple model: migration analysis</h2>
<ul>
<li>Track credit ratings of certain types of loans or certain sectors, either externally from credit rating agencies or internally.</li>
<li>If actual rating deteriorates faster than historical experience, limit lending to that loan class or sector.</li>
<li>Historical credit migration measured through <strong>loan migration matrix</strong> (or transition matrix).</li>
</ul>
<div id="tbl-migration-matrix" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-tbl">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-migration-matrix-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Example loan migration matrix
</figcaption>
<div aria-describedby="tbl-migration-matrix-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>AAA-A</th>
<th>BBB-B</th>
<th>CCC-C</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>AAA-A</td>
<td>0.85</td>
<td>0.10</td>
<td>0.04</td>
<td>0.01</td>
</tr>
<tr class="even">
<td>BBB-B</td>
<td>0.12</td>
<td>0.83</td>
<td>0.03</td>
<td>0.02</td>
</tr>
<tr class="odd">
<td>CCC-C</td>
<td>0.03</td>
<td>0.13</td>
<td>0.80</td>
<td>0.04</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p><a href="#/simple-model-migration-analysis" class="quarto-xref">Table&nbsp;1</a>, for example, shows the <em>transition probabilities</em> of loans that began the year with a certain credit rating being upgraded/downgraded to a certain rating, or default.</p>
<div class="fragment">
<ul>
<li>The probability of AAA-rated loan at the start of a year being downgraded to BBB to B by the year’s end is 0.10.</li>
<li>The probability of AAA-rated loan at the start of a year being downgraded to CCC to C by the year’s end is 0.04.</li>
<li>The probability of AAA-rated loan at the start of a year defaults by the year’s end is 0.01.</li>
</ul>
</div>
</section>
<section id="simple-model-migration-analysis-contd" class="slide level2">
<h2>Simple model: migration analysis (cont’d)</h2>
<p>In practice, FIs use migration matrices with many more rating classes.</p>
<p>Migration analysis is used not only to evaluate commercial loan portfolios, but also to analyze credit card portfolios and consumer loans.</p>
<p>However, potential problems with migration analysis include, for example:</p>
<ul>
<li>Use of historical data.</li>
<li>Rating agencies usually downgrade only after the firm has experienced a downturn.</li>
</ul>
</section>
<section id="simple-model-concentration-limits" class="slide level2">
<h2>Simple model: concentration limits</h2>
<ul>
<li>Limits set on the maximum loan size to an individual borrower/sector or geographical area.</li>
<li>Used to reduce exposures to certain industries and to increase exposure to others.</li>
<li>Use of aggregate limits for industries in which performance is highly correlated.</li>
<li>Bank regulators also limit loan concentrations to individual borrowers to a maximum of 15% of a bank’s capital.</li>
</ul>
<p><span class="math display">\[
\text{Concentration limit} = \text{Maximum loss as a percentage of capital} \times \frac{1}{\text{Loss rate}}
\]</span></p>
<div title="Example">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Example</strong></p>
</div>
<div class="callout-content">
<p>If an FI’s manager is unwilling to permit losses exceeding 15% of the FI’s capital, with an estimated loss rate in a particular industry of 40 per cent, then the manager should set a concentration limit on the exposure to that industry as <span class="math inline">\(15\%\times \frac{1}{0.4}=37.5\%\)</span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="simple-model-concentration-limits-contd" class="slide level2">
<h2>Simple model: concentration limits (cont’d)</h2>
<p>Below is an industry breakdown of Bank of Queensland’s (BOQ) credit exposure as reported in FY2023’s annual report.</p>
<div id="tbl-boq-credit-exposure-by-sector-2023" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-tbl">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-boq-credit-exposure-by-sector-2023-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Proportionate credit exposures of lending activities of BOQ FY23
</figcaption>
<div aria-describedby="tbl-boq-credit-exposure-by-sector-2023-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top">
<thead>
<tr class="header">
<th>Sector</th>
<th>$m</th>
<th>% of Total Exposure</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Residential mortgages</td>
<td>62,738</td>
<td>77.8</td>
</tr>
<tr class="even">
<td>Property and construction</td>
<td>6,887</td>
<td>8.5</td>
</tr>
<tr class="odd">
<td>Healthcare</td>
<td>2,763</td>
<td>3.4</td>
</tr>
<tr class="even">
<td>Professional services</td>
<td>2,431</td>
<td>3.0</td>
</tr>
<tr class="odd">
<td>Agriculture</td>
<td>1,232</td>
<td>1.5</td>
</tr>
<tr class="even">
<td>Transportation</td>
<td>606</td>
<td>0.8</td>
</tr>
<tr class="odd">
<td>Manufacturing and mining</td>
<td>682</td>
<td>0.8</td>
</tr>
<tr class="even">
<td>Hospitality and accommodation</td>
<td>841</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td>Other</td>
<td>2,453</td>
<td>3.0</td>
</tr>
<tr class="even">
<td><strong>Total</strong></td>
<td>80,633</td>
<td>100.0</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section></section>
<section>
<section id="loan-portfolio-diversification-and-modern-portfolio-theory-mpt" class="title-slide slide level1 center">
<h1>Loan portfolio diversification and Modern Portfolio Theory (MPT)</h1>

</section>
<section id="loan-portfolio-diversification-and-mpt" class="slide level2">
<h2>Loan portfolio diversification and MPT</h2>
<p>MPT can be used to measure and control an FI’s aggregate credit risk exposure.</p>
<p>Any model that seeks to estimate an efficient frontier for loans needs to determine and measure three things:</p>
<ul>
<li>The expected return on individual loans</li>
<li>The risk of individual loans</li>
<li>The correlation of default risks between loans</li>
</ul>
<p>Expected return <span class="math inline">\(R_p\)</span> of a portfolio of <span class="math inline">\(N\)</span> assets:</p>
<p><span class="math display">\[
R_p = \sum_{i=1}^N X_i R_i
\]</span></p>
<p>where</p>
<ul>
<li><span class="math inline">\(R_i\)</span> is the expected return on the <span class="math inline">\(i\)</span>th asset</li>
<li><span class="math inline">\(X_i\)</span> is the proportion of the asset portfolio invested in the <span class="math inline">\(i\)</span>th asset (the desired concentration amount)</li>
</ul>
</section>
<section id="loan-portfolio-diversification-and-mpt-contd" class="slide level2">
<h2>Loan portfolio diversification and MPT (cont’d)</h2>
<p>Variance of returns (or risk) of the portfolio <span class="math inline">\(\sigma_p^2\)</span> can be calculated as</p>
<p><span class="math display">\[
\begin{aligned}
\sigma_i^2 &amp;= \sum_{i=1}^N X_i^2 \sigma^2_i + \sum_{i=1}^N \sum_{j=1}^N X_i X_j \sigma_{ij} \\
           &amp;= \sum_{i=1}^N X_i^2 \sigma^2_i + \sum_{i=1}^N \sum_{j=1}^N X_i X_j \rho_{ij} \sigma_i \sigma_j
\end{aligned}
\]</span></p>
<p>where</p>
<ul>
<li><span class="math inline">\(\rho_{ij}\)</span> is the correlation between the returns on the <span class="math inline">\(i\)</span>th asset <span class="math inline">\(j\)</span>th asset</li>
<li><span class="math inline">\(\sigma_i^2\)</span> is the variance of returns on the <span class="math inline">\(i\)</span>th asset</li>
<li><span class="math inline">\(\sigma_{ij}^2\)</span> is the covariance of returns between the <span class="math inline">\(i\)</span>th asset and <span class="math inline">\(j\)</span>th asset</li>
</ul>
</section>
<section id="loan-portfolio-diversification-and-mpt-contd-1" class="slide level2">
<h2>Loan portfolio diversification and MPT (cont’d)</h2>
<p>The fundamental lesson of MPT is that by taking advantage of its size, an FI can diversify considerable amounts of credit risk as long as the returns on different assets are imperfectly correlated with respect to their default risk adjusted returns.</p>
<div id="cell-fig-efficient-frontier" class="cell" data-fig-location="center" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a></a></span>
<span id="cb1-4"><a></a><span class="co"># Define annualized returns and covariance matrix for two assets</span></span>
<span id="cb1-5"><a></a>mean_returns <span class="op">=</span> np.array([<span class="fl">0.04</span>, <span class="fl">0.1</span>])  <span class="co"># Expected annual returns for two assets</span></span>
<span id="cb1-6"><a></a>cov_matrix <span class="op">=</span> np.array([[<span class="fl">0.06</span>, <span class="fl">0.02</span>], [<span class="fl">0.02</span>, <span class="fl">0.10</span>]])  <span class="co"># Covariance matrix of returns</span></span>
<span id="cb1-7"><a></a>individual_volatility <span class="op">=</span> np.sqrt(np.diag(cov_matrix))  <span class="co"># Volatility of individual assets</span></span>
<span id="cb1-8"><a></a></span>
<span id="cb1-9"><a></a><span class="co"># Define the number of portfolios to simulate</span></span>
<span id="cb1-10"><a></a>num_portfolios <span class="op">=</span> <span class="dv">10000</span></span>
<span id="cb1-11"><a></a></span>
<span id="cb1-12"><a></a><span class="co"># Initialize empty lists to store portfolio returns, volatilities, and weights</span></span>
<span id="cb1-13"><a></a>results <span class="op">=</span> np.zeros((<span class="dv">3</span>, num_portfolios))</span>
<span id="cb1-14"><a></a></span>
<span id="cb1-15"><a></a><span class="co"># Simulate random portfolios</span></span>
<span id="cb1-16"><a></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_portfolios):</span>
<span id="cb1-17"><a></a>    <span class="co"># Generate random weights for the two assets</span></span>
<span id="cb1-18"><a></a>    weights <span class="op">=</span> np.random.random(<span class="dv">2</span>)</span>
<span id="cb1-19"><a></a>    weights <span class="op">/=</span> np.<span class="bu">sum</span>(weights)  <span class="co"># Ensure weights sum to 1</span></span>
<span id="cb1-20"><a></a></span>
<span id="cb1-21"><a></a>    <span class="co"># Calculate portfolio return and volatility (risk)</span></span>
<span id="cb1-22"><a></a>    portfolio_return <span class="op">=</span> np.dot(weights, mean_returns)</span>
<span id="cb1-23"><a></a>    portfolio_volatility <span class="op">=</span> np.sqrt(np.dot(weights.T, np.dot(cov_matrix, weights)))</span>
<span id="cb1-24"><a></a></span>
<span id="cb1-25"><a></a>    <span class="co"># Store the results</span></span>
<span id="cb1-26"><a></a>    results[<span class="dv">0</span>, i] <span class="op">=</span> portfolio_volatility</span>
<span id="cb1-27"><a></a>    results[<span class="dv">1</span>, i] <span class="op">=</span> portfolio_return</span>
<span id="cb1-28"><a></a>    results[<span class="dv">2</span>, i] <span class="op">=</span> portfolio_return <span class="op">/</span> portfolio_volatility  <span class="co"># Sharpe ratio</span></span>
<span id="cb1-29"><a></a></span>
<span id="cb1-30"><a></a><span class="co"># Calculate the Global Minimum Variance Portfolio (GMVP)</span></span>
<span id="cb1-31"><a></a>inv_cov_matrix <span class="op">=</span> np.linalg.inv(cov_matrix)</span>
<span id="cb1-32"><a></a>ones <span class="op">=</span> np.ones(<span class="bu">len</span>(mean_returns))</span>
<span id="cb1-33"><a></a>weights_gmvp <span class="op">=</span> inv_cov_matrix.dot(ones) <span class="op">/</span> ones.T.dot(inv_cov_matrix).dot(ones)</span>
<span id="cb1-34"><a></a>gmvp_return <span class="op">=</span> weights_gmvp.dot(mean_returns)</span>
<span id="cb1-35"><a></a>gmvp_volatility <span class="op">=</span> np.sqrt(weights_gmvp.T.dot(cov_matrix).dot(weights_gmvp))</span>
<span id="cb1-36"><a></a></span>
<span id="cb1-37"><a></a><span class="co"># Plot the efficient frontier</span></span>
<span id="cb1-38"><a></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb1-39"><a></a>plt.scatter(</span>
<span id="cb1-40"><a></a>    results[<span class="dv">0</span>, :], results[<span class="dv">1</span>, :], c<span class="op">=</span>results[<span class="dv">2</span>, :], cmap<span class="op">=</span><span class="st">"Blues"</span>, marker<span class="op">=</span><span class="st">"o"</span>, alpha<span class="op">=</span><span class="dv">1</span></span>
<span id="cb1-41"><a></a>)</span>
<span id="cb1-42"><a></a>plt.colorbar(label<span class="op">=</span><span class="st">"Sharpe Ratio"</span>)</span>
<span id="cb1-43"><a></a></span>
<span id="cb1-44"><a></a><span class="co"># Plot individual assets as red dots</span></span>
<span id="cb1-45"><a></a>plt.scatter(</span>
<span id="cb1-46"><a></a>    individual_volatility[<span class="dv">0</span>],</span>
<span id="cb1-47"><a></a>    mean_returns[<span class="dv">0</span>],</span>
<span id="cb1-48"><a></a>    <span class="co"># color="red",</span></span>
<span id="cb1-49"><a></a>    marker<span class="op">=</span><span class="st">"o"</span>,</span>
<span id="cb1-50"><a></a>    s<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb1-51"><a></a>    label<span class="op">=</span><span class="st">"Asset 1"</span>,</span>
<span id="cb1-52"><a></a>)</span>
<span id="cb1-53"><a></a>plt.scatter(</span>
<span id="cb1-54"><a></a>    individual_volatility[<span class="dv">1</span>],</span>
<span id="cb1-55"><a></a>    mean_returns[<span class="dv">1</span>],</span>
<span id="cb1-56"><a></a>    <span class="co"># color="blue",</span></span>
<span id="cb1-57"><a></a>    marker<span class="op">=</span><span class="st">"o"</span>,</span>
<span id="cb1-58"><a></a>    s<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb1-59"><a></a>    label<span class="op">=</span><span class="st">"Asset 2"</span>,</span>
<span id="cb1-60"><a></a>)</span>
<span id="cb1-61"><a></a><span class="co"># Plot GMVP</span></span>
<span id="cb1-62"><a></a>plt.scatter(gmvp_volatility, gmvp_return, color<span class="op">=</span><span class="st">"red"</span>, marker<span class="op">=</span><span class="st">"X"</span>, s<span class="op">=</span><span class="dv">100</span>, label<span class="op">=</span><span class="st">"GMVP"</span>)</span>
<span id="cb1-63"><a></a></span>
<span id="cb1-64"><a></a><span class="co"># Set axis limits to start from 0</span></span>
<span id="cb1-65"><a></a>plt.xlim(<span class="dv">0</span>, np.<span class="bu">max</span>(results[<span class="dv">0</span>, :]) <span class="op">+</span> <span class="fl">0.02</span>)  <span class="co"># Add a small margin on the right</span></span>
<span id="cb1-66"><a></a>plt.ylim(<span class="dv">0</span>, np.<span class="bu">max</span>(results[<span class="dv">1</span>, :]) <span class="op">+</span> <span class="fl">0.02</span>)  <span class="co"># Add a small margin on the top</span></span>
<span id="cb1-67"><a></a></span>
<span id="cb1-68"><a></a><span class="co"># Annotate the plot</span></span>
<span id="cb1-69"><a></a>plt.title(<span class="st">"Efficient Frontier with Two Assets"</span>)</span>
<span id="cb1-70"><a></a>plt.xlabel(<span class="st">"Volatility (Risk)"</span>)</span>
<span id="cb1-71"><a></a>plt.ylabel(<span class="st">"Expected Return"</span>)</span>
<span id="cb1-72"><a></a>plt.legend(loc<span class="op">=</span><span class="st">"upper left"</span>)</span>
<span id="cb1-73"><a></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-efficient-frontier" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-efficient-frontier-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img data-src="index_files/figure-revealjs/fig-efficient-frontier-output-1.png" width="788" height="523">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-efficient-frontier-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: MPT and efficient frontier
</figcaption>
</figure>
</div>
</div>
</div>
<p>Minimum risk portfolio (Global Minimum Variance Portfolio, GMVP)</p>
<ul>
<li>Combination of assets that reduces the variance of portfolio returns on the lowest feasible level.</li>
</ul>
</section>
<section id="moodys-analytics-riskfrontier-model" class="slide level2">
<h2>Moody’s Analytics RiskFrontier Model</h2>
<p>Moody’s Analytics <strong>RiskFrontier</strong> model (previously <strong>Portfolio Manager</strong> model) estimates the return, risk and correlations between loans in an FI’s loan portfolio (with its own proprietary methods), which are then incorporated into the standard MPT equations to get an estimate of the risk and return of the FI’s loan portfolio.</p>
<ol type="1">
<li>Moody’s Analytics <strong>Credit Monitor</strong> model estimates EDF (Expected Default Frequency) to examine the default risk of individual loans.</li>
<li>Moody’s Analytics <strong>RiskFrontier</strong> model then uses EDF to identify the overall risk of the loan portfolio.
<ul>
<li>Does not require loan returns to be normally distributed</li>
<li>Applies MPT to the loan portfolio, although many loans have non-traded aspects</li>
</ul></li>
</ol>
</section>
<section id="moodys-analytics-riskfrontier-model-contd" class="slide level2">
<h2>Moody’s Analytics RiskFrontier Model (cont’d)</h2>
<p>In Moody’s Analytics RiskFrontier model, portfolio return and risk are a function of:</p>
<ul>
<li>the extent to which loan (exposure) values can change over a one-year horizon, and
<ul>
<li>based on EDF and the loss given default (LGD)</li>
</ul></li>
<li>how these value changes move together across different loans in the loan portfolio (correlations).
<ul>
<li>based on the joint impact of close to 1,000 different systematic factors, which reflect the global economy, region, industry, and country</li>
</ul></li>
</ul>
</section>
<section id="moodys-analytics-riskfrontier-model-contd-1" class="slide level2">
<h2>Moody’s Analytics RiskFrontier Model (cont’d)</h2>
<p>Required input variables:</p>
<div class="fragment">
<ol type="1">
<li><span class="math inline">\(R_i\)</span>: Expected return on a loan to a borrower <span class="math inline">\(i\)</span> is the loan’s all-in-drawn spread (<span class="math inline">\(AIS\)</span>) minus expected loss (expected default frequency times <strong>loss given default (LGD)</strong>).<sup>1</sup> <span class="math display">\[
R_i = AIS_i - E(L_i) = AIS_i - (EDF_i\times LGD_i)
\]</span>
<ul>
<li>The Basel Committee assessed a fixed 45% LGD on secured loans if fully secured by physical, non–real estate collateral and 40% if fully secured by receivables.</li>
</ul></li>
</ol>
</div>
<div class="fragment">
<ol start="2" type="1">
<li><span class="math inline">\(\sigma_i\)</span>: Risk of a loan to borrower <span class="math inline">\(i\)</span>, “unexpected loss”, is the volatility of the loan’s default rate <span class="math inline">\(\sigma_{D_i}\)</span> times the amount lost given default (LGD).<sup>2</sup> <span class="math display">\[
\sigma_i = UL_i = \sigma_{D_i} \times LGD_i = \sqrt{EDF_i(1-EDF_i)} \times LGD_i
\]</span>
<ul>
<li>Assume defaults are binomially distributed (default or not), the standard deviation of default rate (<span class="math inline">\(\sigma_{D_i}\)</span>) is <span class="math inline">\(\sqrt{EDF_i(1-EDF_i)}\)</span>.</li>
</ul></li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li><span class="math inline">\(\rho_{ij}\)</span>: Correlation of default risks between borrowers <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> is the correlation between the systematic return components of the asset returns of <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>.</li>
</ol>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p>In the textbook <span class="citation" data-cites="saunders_financial_2023">Saunders, Cornett, and Erhemjamts (<a href="#/references" role="doc-biblioref" onclick="">2023</a>)</span>, this equation has a typo: <span class="math inline">\(E(L_i)\)</span> is written as <span class="math inline">\(R(L_i)\)</span>. Note that <span class="math inline">\(E(\cdot)\)</span> represents the “expectation” sign and <span class="math inline">\(L_i\)</span> stands for loan loss.</p></li><li id="fn2"><p>In the textbook <span class="citation" data-cites="saunders_financial_2023">Saunders, Cornett, and Erhemjamts (<a href="#/references" role="doc-biblioref" onclick="">2023</a>)</span>, this equation is entirely incorrectly written.</p></li></ol></aside></section>
<section id="moodys-analytics-riskfrontier-model-contd-2" class="slide level2">
<h2>Moody’s Analytics RiskFrontier Model (cont’d)</h2>
<p>To measure the unobservable default risk correlation between any two borrowers, the Moody’s Analytics <strong>Global Correlation Model</strong> (GCORR) uses the systematic asset return components of the two borrowers and calculates a correlation that is based on a factor model rather than direct historical observations.</p>

<img data-src="./figures/GCorr-corporate-factor-structure.png" class="quarto-figure quarto-figure-center r-stretch"><p class="caption">
Figure&nbsp;2: GCorr Corporate Factor Structure
</p><p><a href="#/fig-gcorr" class="quarto-xref">Figure&nbsp;2</a> provides a visual representation of the Moody’s Analytics GCorr Corporate factor structure.</p>
</section>
<section id="moodys-analytics-riskfrontier-model-example" class="slide level2">
<h2>Moody’s Analytics RiskFrontier Model (example)</h2>
<p>Suppose that an FI holds two loans with the following characteristics. Assume that the correlation <span class="math inline">\(\rho_{12}=-0.25\)</span>, what are the return and risk of the portfolio?</p>
<table class="caption-top">
<colgroup>
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 59%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th>Loan <span class="math inline">\(i\)</span></th>
<th><span class="math inline">\(X_i\)</span></th>
<th>Spread between loan rate and FI’s cost of funds</th>
<th>Fees</th>
<th>LGD</th>
<th>EDF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0.6</td>
<td>5%</td>
<td>2%</td>
<td>25%</td>
<td>3%</td>
</tr>
<tr class="even">
<td>2</td>
<td>0.4</td>
<td>4.5%</td>
<td>1.5%</td>
<td>20%</td>
<td>2%</td>
</tr>
</tbody>
</table>
<p>The return and risk on loan 1 are:</p>
<div class="fragment">
<p><span class="math display">\[
\begin{aligned}
R_1 &amp;= (0.05+0.02) - (0.03\times0.25) = 0.0625 \\
\sigma_1 &amp;= \sqrt{0.03\times0.97} \times 0.25 = 0.04265
\end{aligned}
\]</span></p>
</div>
<p>The return and risk on loan 2 are:</p>
<div class="fragment">
<p><span class="math display">\[
\begin{aligned}
R_2 &amp;= (0.045+0.015) - (0.02\times0.2) = 0.056 \\
\sigma_2 &amp;= \sqrt{0.02\times0.98} \times 0.2 = 0.028
\end{aligned}
\]</span></p>
</div>
<p>The return and risk of the portfolio are then:</p>
<div class="fragment">
<p><span class="math display">\[
\begin{aligned}
R_p &amp;= 0.6\times 0.0625 + 0.4\times 0.056 = 0.0599 \text{ or } 5.99\%  \\
\sigma_p^2 &amp;= (0.6)^2(0.04265)^2 + (0.4)^2(0.028)^2 + 2(0.6)(0.4)(-0.25)(0.04265)(0.028) = 0.0006369 \\
\sigma_p &amp;= \sqrt{0.0006369} = 0.0252 = 2.52\%
\end{aligned}
\]</span></p>
</div>
</section>
<section id="partial-application-of-portfolio-theory" class="slide level2">
<h2>Partial application of portfolio theory</h2>
<ol type="1">
<li>Loan volume-based models</li>
<li>Loan loss ratio-based models</li>
</ol>
</section>
<section id="partial-application-of-portfolio-theory-loan-volume-based-models" class="slide level2">
<h2>Partial application of portfolio theory: Loan volume-based models</h2>
<p>Direct application of MPT is often difficult for FIs lacking information on market prices because many of the loans are not always able to be bought and sold in established markets.</p>
<p>Data can be gathered from:</p>
<ul>
<li>Reports to the central bank</li>
<li>Data on shared national credit</li>
<li>Commercial databases</li>
</ul>
<p>Data provides market benchmarks against which FIs can compare their loan portfolios.</p>
<div id="tbl-loan-allocation" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-tbl">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-loan-allocation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: Allocation of the Loan Portfolio to Different Sectors (in percentages)
</figcaption>
<div aria-describedby="tbl-loan-allocation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>(1) National</th>
<th>(2) Bank A</th>
<th>(3) Bank B</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Real estate</td>
<td>45%</td>
<td>65%</td>
<td>10%</td>
</tr>
<tr class="even">
<td>C&amp;I</td>
<td>30</td>
<td>20</td>
<td>25</td>
</tr>
<tr class="odd">
<td>Individual</td>
<td>15</td>
<td>10</td>
<td>55</td>
</tr>
<tr class="even">
<td>Others</td>
<td>10</td>
<td>5</td>
<td>10</td>
</tr>
<tr class="odd">
<td><strong>Total</strong></td>
<td><strong>100</strong></td>
<td><strong>100</strong></td>
<td><strong>100</strong></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="partial-application-of-portfolio-theory-loan-volume-based-models-contd" class="slide level2">
<h2>Partial application of portfolio theory: Loan volume-based models (cont’d)</h2>
<ul>
<li>Deviations from the market portfolio benchmark indicate the relative degree of loan concentration.</li>
<li>Relative measure of loan allocation deviation:</li>
</ul>
<p><span class="math display">\[
\sigma_j = \sqrt{\frac{\sum_{i=1}^N (X_{ij}-X{i})^2}{N}}
\]</span></p>
<p>where</p>
<ul>
<li><span class="math inline">\(\sigma_j\)</span> is the standard deviation of bank <span class="math inline">\(j\)</span>’s asset allocation proportions from the national benchmark</li>
<li><span class="math inline">\(X_i\)</span> is the national asset allocations</li>
<li><span class="math inline">\(X_{ij}\)</span> is the asset allocation proportions of the <span class="math inline">\(j\)</span>th bank</li>
<li><span class="math inline">\(N\)</span> is the number of observations or loan categories</li>
</ul>
</section>
<section id="partial-application-of-portfolio-theory-loan-volume-based-models-contd-1" class="slide level2">
<h2>Partial application of portfolio theory: Loan volume-based models (cont’d)</h2>
<p>Refer to <a href="#/partial-application-of-portfolio-theory-loan-volume-based-models" class="quarto-xref">Table&nbsp;3</a>. We get the deviation of Bank A’s loan portfolio allocation as follows:</p>
<p><span class="math display">\[
\begin{aligned}
(X_{1A}-X_1)^2 &amp;= (0.65-0.45)^2 = 0.04 \\
(X_{2A}-X_2)^2 &amp;= (0.20-0.30)^2 = 0.01 \\
(X_{3A}-X_3)^2 &amp;= (0.10-0.15)^2 = 0.0025 \\
(X_{4A}-X_4)^2 &amp;= (0.05-0.10)^2 = 0.0025
\end{aligned}
\]</span> and therefore <span class="math display">\[
\sigma_A = \sqrt{\frac{0.04+0.01+0.0025+0.0025}{4}} = 11.73\%
\]</span></p>
</section>
<section id="partial-application-of-portfolio-theory-loan-loss-ratio-based-models" class="slide level2">
<h2>Partial application of portfolio theory: Loan loss ratio-based models</h2>
<p>Estimates systematic loan loss risk of a particular sector or industry to the loan loss risk of an FI’s total loan portfolio</p>
<p>Use of time-series regression of quarterly losses:</p>
<p><span class="math display">\[
\frac{\text{Sectoral losses in the } i\text{th sector}}{\text{Loans to the } i\text{th sector}} = \alpha + \beta \frac{\text{Total loan losses}}{\text{Total loans}}
\]</span></p>
<p>where</p>
<ul>
<li><span class="math inline">\(\alpha\)</span> measures the loan loss rate for a sector that has no sensitivity to losses on the aggregate loan portfolio</li>
<li><span class="math inline">\(\beta\)</span> measures the systematic loss sensitivity of the <span class="math inline">\(i\)</span>th sector loans to total loan losses</li>
</ul>
<p>The implication of this model is that sectors with lower <span class="math inline">\(\beta\)</span>s could have higher concentration limits than high <span class="math inline">\(\beta\)</span> sectors—since low <span class="math inline">\(\beta\)</span> loan sector risks (loan losses) are less systematic (that is, are more diversifiable in a portfolio sense).</p>
</section>
<section id="regulatory-models" class="slide level2">
<h2>Regulatory models</h2>
<ul>
<li>Federal Reserve’s 1994 Ruling on Credit Concentration Risk:
<ul>
<li>Adopted a subjective approach based on examiner discretion.</li>
<li>Rejected technical models due to insufficient data and undeveloped methods at the time.</li>
</ul></li>
<li>2006 Regulatory Changes:
<ul>
<li>Bank for International Settlements (BIS): Released guidance on credit risk assessment and valuation for loans, structured around 10 principles on risk assessment and supervisory evaluation.</li>
<li>Office of the Comptroller of the Currency (OCC): Released guidance on sound risk management practices for commercial real estate lending.</li>
</ul></li>
<li>OCC/Fed Joint Study on 2006 CRE Concentration Guidance (April 2013):
<ul>
<li>13% of banks with construction loans exceeding 100% of capital failed.</li>
<li>23% of banks exceeding both construction and total CRE lending criteria failed, compared to only 0.5% of banks that did not exceed either criterion.</li>
<li>Regulators encouraged financial institutions to review their policies and practices related to CRE lending.</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="use-of-derivatives-to-manage-credit-risk" class="title-slide slide level1 center">
<h1>Use of derivatives to manage credit risk</h1>

</section>
<section id="credit-derivatives" class="slide level2">
<h2>Credit derivatives</h2>
<ul>
<li>Diversification of loan portfolio helps FIs to manage their credit risk exposure.</li>
<li>New types of derivative instruments are now available to better allow FIs to hedge their credit risk both on individual loans or on loan portfolios.
<ul>
<li>Credit forwards, options, and swaps.</li>
</ul></li>
<li>These credit derivatives allow FIs to separate the credit risk exposure from the lending process itself.</li>
</ul>
</section>
<section id="credit-forward-contracts-and-credit-risk-hedging" class="slide level2">
<h2>Credit forward contracts and credit risk hedging</h2>
<p>A credit forward is a forward agreement that hedges against an increase in default risk on a loan (a decline in credit quality of borrower) after the loan rate is determined and the loan is issued.</p>
<ul>
<li>Common buyers are insurance companies who bears the risk of an increase in default risk on the benchmark bond of the borrower</li>
<li>Common sellers are banks</li>
<li>Specifies a credit spread on a benchmark bond issued by a borrower</li>
<li>Example: BBB bond at time of origination may have 2 per cent spread over US Treasury of same maturity</li>
</ul>
</section>
<section id="credit-forward-contracts-and-credit-risk-hedging-contd" class="slide level2">
<h2>Credit forward contracts and credit risk hedging (cont’d)</h2>
<div id="tbl-payments-of-credit-forward" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-tbl">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-payments-of-credit-forward-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4: Payment pattern on a credit forward contract
</figcaption>
<div aria-describedby="tbl-payments-of-credit-forward-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top">
<colgroup>
<col style="width: 30%">
<col style="width: 34%">
<col style="width: 35%">
</colgroup>
<thead>
<tr class="header">
<th>Credit Spread at End of Forward Agreement</th>
<th>Credit Spread Seller (bank)</th>
<th>Credit Spread Buyer (counterparty)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(\phi_T&gt;\phi_F\)</span></td>
<td>Receives <span class="math inline">\((\phi_T - \phi_F) \times MD \times A\)</span></td>
<td>Pays <span class="math inline">\((\phi_T - \phi_F) \times MD \times A\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(\phi_T&lt;\phi_F\)</span></td>
<td>Pays <span class="math inline">\((\phi_F - \phi_T) \times MD \times A\)</span></td>
<td>Receives <span class="math inline">\((\phi_F - \phi_T) \times MD \times A\)</span></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>where</p>
<ul>
<li><span class="math inline">\(\phi_F\)</span> is the credit spread on which the credit forward contract is written</li>
<li><span class="math inline">\(\phi_T\)</span> is the actual credit spread on the bond when the credit forward matures</li>
<li><span class="math inline">\(MD\)</span> is the modified duration on the benchmark bond</li>
<li><span class="math inline">\(A\)</span> is the principal amount of the forward agreement</li>
</ul>
<p>Payout by the bank is capped since <span class="math inline">\(\phi_T\geq 0\)</span> (credit spread is non-negative).</p>
<ul>
<li>When a bank gives a loan, it is similar to writing a put option</li>
<li>When a bank sells a credit forward, the payoff is similar to buying a put option</li>
</ul>
</section>
<section id="credit-options" class="slide level2">
<h2>Credit options</h2>
<p>Use of options to hedge credit risk is a relatively new phenomenon. In September 2021, commercial bank holdings of credit options totaled $233 billion, which represented 6.05% of all credit derivatives outstanding.</p>
<ul>
<li>A <strong>credit spread call option</strong> is a call option whose payoff increases as the (default) risk premium or yield spread on a specified benchmark bond of the borrower increases above some exercise spread.</li>
<li>A <strong>digital default option</strong> is an option that pays a stated amount in the event of a loan default (the extreme case of increased credit risk).</li>
</ul>
</section>
<section id="credit-default-swaps-cds" class="slide level2">
<h2>Credit (default) swaps (CDS)</h2>
<ul>
<li>Fastest-growing types of swaps. Most important type of credit derivatives.</li>
<li>In 2000, commercial banks’ total notional principal for outstanding credit derivatives was $426 billion.</li>
<li>By March 2008, this amount had risen to $16.44 trillion, before falling to $13.44 trillion in 2009.</li>
<li>By September 2011, the amount increased to $15.66 trillion, of which $15.31 trillion was CDSs.</li>
<li>Due to post-GFC regulations, the notional value of credit derivatives held by banks dropped to $3.9 trillion in September 2021, with $3.4 trillion of this amount being CDS contracts.</li>
</ul>
<p>Why CDS?</p>
<ol type="1">
<li>Credit risk is still more likely to cause an FI to fail than is either interest rate risk or FX risk.</li>
<li>CDSs allow FIs to maintain long-term customer lending relationships without bearing the full credit risk exposure from those relationships.</li>
</ol>
</section>
<section id="basics-of-cds" class="slide level2">
<h2>Basics of CDS</h2>
<ul>
<li><strong>CDS Payments</strong>: The buyer makes periodic payments to the seller (quarterly, semi-annually, or annually) until the end of the swap or a credit event (e.g., default) occurs.</li>
<li><strong>Settlement</strong>: Upon default, settlement involves either physical delivery of bonds (loans) or a cash payment.
<ul>
<li>The protection buyer receives a payment upon the occurrence of a credit event trigger, but the swap “expires worthless” if no trigger occurs.</li>
</ul></li>
<li><strong>Cheapest-to-Deliver Option</strong>: The CDS buyer has the option to deliver the cheapest qualifying bond or loan when a default happens.</li>
<li>No requirement that the CDS buyer actually owns the underlying reference securities.</li>
<li>The CDS buyer hedges its exposure to default risk, but there is still counterparty credit risk in the event that the seller fails to perform their obligations under the terms of the contract.<sup>1</sup></li>
</ul>
<p>We examine two types of credit swaps:</p>
<ol type="1">
<li>total return swap</li>
<li>pure credit swap</li>
</ol>
<aside><ol class="aside-footnotes"><li id="fn3"><p>Search and read about the concern in September 2008 with regard to AIG, an active CDS seller.</p></li></ol></aside></section>
<section id="credit-swaps-total-return-swaps" class="slide level2">
<h2>Credit swaps: total return swaps</h2>
<p>A <strong>total return swap</strong> involves <em>swapping</em> an obligation to pay interest at a specified fixed or floating rate <em>for</em> payments representing the total return on a loan or a bond (interest and principal value changes) of a specified amount.</p>
<p>The figure below illustrates a total return swap.<sup>1</sup></p>
<div class="cell" data-layout-align="default">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource default number-lines code-with-copy"><code class="sourceCode default"><span id="cb2-1"><a></a>graph LR</span>
<span id="cb2-2"><a></a>    A[Other FI]</span>
<span id="cb2-3"><a></a>    B[FI lender]</span>
<span id="cb2-4"><a></a>    B -- Loan --&gt; C[Customer]</span>
<span id="cb2-5"><a></a>    subgraph Total Return Swap</span>
<span id="cb2-6"><a></a>    B -- "$f+{(P_T-P_0)}/{P_0}$" --&gt; A</span>
<span id="cb2-7"><a></a>    A -- 1-year LIBOR --&gt; B</span>
<span id="cb2-8"><a></a>    end</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewbox="-8 -8 592.0625 136.5" style="; display: block; margin: auto auto auto auto" xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="960" id="mermaid-figure-1" height="480">
<style>#mermaid-figure-1{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-figure-1 .error-icon{fill:#552222;}#mermaid-figure-1 .error-text{fill:#552222;stroke:#552222;}#mermaid-figure-1 .edge-thickness-normal{stroke-width:2px;}#mermaid-figure-1 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-figure-1 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-figure-1 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-figure-1 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-figure-1 .marker{fill:#333333;stroke:#333333;}#mermaid-figure-1 .marker.cross{stroke:#333333;}#mermaid-figure-1 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-figure-1 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-figure-1 .cluster-label text{fill:#333;}#mermaid-figure-1 .cluster-label span,#mermaid-figure-1 p{color:#333;}#mermaid-figure-1 .label text,#mermaid-figure-1 span,#mermaid-figure-1 p{fill:#333;color:#333;}#mermaid-figure-1 .node rect,#mermaid-figure-1 .node circle,#mermaid-figure-1 .node ellipse,#mermaid-figure-1 .node polygon,#mermaid-figure-1 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-figure-1 .flowchart-label text{text-anchor:middle;}#mermaid-figure-1 .node .label{text-align:center;}#mermaid-figure-1 .node.clickable{cursor:pointer;}#mermaid-figure-1 .arrowheadPath{fill:#333333;}#mermaid-figure-1 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-figure-1 .flowchart-link{stroke:#333333;fill:none;}#mermaid-figure-1 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-figure-1 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-figure-1 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-figure-1 .cluster text{fill:#333;}#mermaid-figure-1 .cluster span,#mermaid-figure-1 p{color:#333;}#mermaid-figure-1 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-figure-1 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-figure-1 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style>
<g><marker orient="auto" markerheight="12" markerwidth="12" markerunits="userSpaceOnUse" refy="5" refx="10" viewbox="0 0 10 10" class="marker flowchart" id="flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerheight="12" markerwidth="12" markerunits="userSpaceOnUse" refy="5" refx="0" viewbox="0 0 10 10" class="marker flowchart" id="flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerheight="11" markerwidth="11" markerunits="userSpaceOnUse" refy="5" refx="11" viewbox="0 0 10 10" class="marker flowchart" id="flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerheight="11" markerwidth="11" markerunits="userSpaceOnUse" refy="5" refx="-1" viewbox="0 0 10 10" class="marker flowchart" id="flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerheight="11" markerwidth="11" markerunits="userSpaceOnUse" refy="5.2" refx="12" viewbox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerheight="11" markerwidth="11" markerunits="userSpaceOnUse" refy="5.2" refx="-1" viewbox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g id="subGraph0" class="cluster default flowchart-label"><rect height="120.5" width="409.265625" y="0" x="0" ry="0" rx="0" style=""></rect><g transform="translate(139.953125, 0)" class="cluster-label"><foreignobject height="19" width="129.359375">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Total Return Swap</span>
</div>
</foreignobject></g></g></g><g class="edgePaths"><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-C" id="L-B-C-0" d="M384.265625,60.25L388.4322916666667,60.25C392.5989583333333,60.25,400.9322916666667,60.25,412.0859375,60.25C423.2395833333333,60.25,437.2135416666667,60.25,451.1875,60.25C465.1614583333333,60.25,479.1354166666667,60.25,486.1223958333333,60.25L493.109375,60.25"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-A" id="L-B-A-0" d="M305.546875,65.6212957900492L288.2916666666667,67.976079825041C271.0364583333333,70.3308638600328,236.52604166666666,75.0404319300164,202.015625,74.99649694523656C167.50520833333334,74.95256196045669,132.99479166666666,70.1551239209134,115.73958333333333,67.75640490114175L98.484375,65.35768588137009"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-B" id="L-A-B-0" d="M98.484375,55.14231411862991L115.73958333333333,52.74359509885826C132.99479166666666,50.34487607908661,167.50520833333334,45.5474380395433,202.015625,45.50350305476345C236.52604166666666,45.4595680699836,271.0364583333333,50.1691361399672,288.2916666666667,52.523920174958995L305.546875,54.87870420995079"></path></g><g class="edgeLabels"><g transform="translate(451.1875, 60.25)" class="edgeLabel"><g transform="translate(-16.921875, -9.5)" class="label"><foreignobject height="19" width="33.84375">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="edgeLabel">Loan</span>
</div>
</foreignobject></g></g><g transform="translate(202.015625, 79.75)" class="edgeLabel"><g transform="translate(-78.53125, -9.5)" class="label"><foreignobject height="19" width="157.0625">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="edgeLabel"><span class="math inline">\(f+{(P_T-P_0)}/{P_0}\)</span></span>
</div>
</foreignobject></g></g><g transform="translate(202.015625, 40.75)" class="edgeLabel"><g transform="translate(-46.015625, -9.5)" class="label"><foreignobject height="19" width="92.03125">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="edgeLabel">1-year LIBOR</span>
</div>
</foreignobject></g></g></g><g class="nodes"><g transform="translate(61.7421875, 60.25)" id="flowchart-A-16" class="node default default flowchart-label"><rect height="34" width="73.484375" y="-17" x="-36.7421875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-29.2421875, -9.5)" style="" class="label"><rect></rect><foreignobject height="19" width="58.484375">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Other FI</span>
</div>
</foreignobject></g></g><g transform="translate(344.90625, 60.25)" id="flowchart-B-17" class="node default default flowchart-label"><rect height="34" width="78.71875" y="-17" x="-39.359375" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-31.859375, -9.5)" style="" class="label"><rect></rect><foreignobject height="19" width="63.71875">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">FI lender</span>
</div>
</foreignobject></g></g><g transform="translate(534.5859375, 60.25)" id="flowchart-C-19" class="node default default flowchart-label"><rect height="34" width="82.953125" y="-17" x="-41.4765625" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-33.9765625, -9.5)" style="" class="label"><rect></rect><foreignobject height="19" width="67.953125">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Customer</span>
</div>
</foreignobject></g></g></g></g></g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>The FI lender pays a fixed annual rate <span class="math inline">\(f\)</span> plus changes in the market value of the loan and receives a variable rate payment (e.g., 1-year LIBOR).</p>
<ul>
<li>Interest rate risk remains</li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn4"><p>In the textbook <span class="citation" data-cites="saunders_financial_2023">Saunders, Cornett, and Erhemjamts (<a href="#/references" role="doc-biblioref" onclick="">2023</a>)</span>, Figure 25-4 incorrectly has <span class="math inline">\(f-\frac{P_t-P_0}{P_0}\)</span>.</p></li></ol></aside></section>
<section id="credit-swaps-total-return-swaps-contd" class="slide level2">
<h2>Credit swaps: total return swaps (cont’d)</h2>
<div id="cell-fig-trs" class="cell" data-fig-location="center" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-2"><a></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-3"><a></a></span>
<span id="cb3-4"><a></a>np.random.seed(<span class="dv">8003</span>)</span>
<span id="cb3-5"><a></a><span class="co"># Parameters for the TRS</span></span>
<span id="cb3-6"><a></a>notional <span class="op">=</span> <span class="dv">1_000_000</span>  <span class="co"># Notional amount (1 million)</span></span>
<span id="cb3-7"><a></a>fixed_rate <span class="op">=</span> <span class="fl">0.03</span>  <span class="co"># Fixed annual rate paid by the TRS receiver (3%)</span></span>
<span id="cb3-8"><a></a>asset_volatility <span class="op">=</span> <span class="fl">0.1</span>  <span class="co"># Volatility of the asset's return (10%)</span></span>
<span id="cb3-9"><a></a>years <span class="op">=</span> <span class="dv">5</span>  <span class="co"># Time period of the TRS (5 years)</span></span>
<span id="cb3-10"><a></a>periods_per_year <span class="op">=</span> <span class="dv">4</span>  <span class="co"># Payments per year (quarterly)</span></span>
<span id="cb3-11"><a></a></span>
<span id="cb3-12"><a></a></span>
<span id="cb3-13"><a></a><span class="co"># Generate the timeline for TRS payments</span></span>
<span id="cb3-14"><a></a><span class="kw">def</span> generate_trs_timeline(</span>
<span id="cb3-15"><a></a>    notional, fixed_rate, asset_volatility, years, periods_per_year<span class="op">=</span><span class="dv">4</span></span>
<span id="cb3-16"><a></a>):</span>
<span id="cb3-17"><a></a>    <span class="co"># Set up the timeline with quarterly periods</span></span>
<span id="cb3-18"><a></a>    total_periods <span class="op">=</span> periods_per_year <span class="op">*</span> years</span>
<span id="cb3-19"><a></a>    time_points <span class="op">=</span> np.arange(<span class="dv">1</span>, total_periods <span class="op">+</span> <span class="dv">1</span>) <span class="op">/</span> periods_per_year</span>
<span id="cb3-20"><a></a></span>
<span id="cb3-21"><a></a>    <span class="co"># Calculate the periodic fixed payment amount (quarterly)</span></span>
<span id="cb3-22"><a></a>    periodic_fixed_payment <span class="op">=</span> (</span>
<span id="cb3-23"><a></a>        <span class="op">-</span>notional <span class="op">*</span> fixed_rate <span class="op">/</span> periods_per_year</span>
<span id="cb3-24"><a></a>    )  <span class="co"># Fixed payment made by TRS receiver</span></span>
<span id="cb3-25"><a></a></span>
<span id="cb3-26"><a></a>    <span class="co"># Simulate random returns on the asset</span></span>
<span id="cb3-27"><a></a>    asset_returns <span class="op">=</span> np.random.normal(loc<span class="op">=</span><span class="dv">0</span>, scale<span class="op">=</span>asset_volatility, size<span class="op">=</span>total_periods)</span>
<span id="cb3-28"><a></a></span>
<span id="cb3-29"><a></a>    <span class="co"># Initialize lists to store the results</span></span>
<span id="cb3-30"><a></a>    total_returns <span class="op">=</span> np.zeros(total_periods)</span>
<span id="cb3-31"><a></a>    payments <span class="op">=</span> np.zeros(total_periods)</span>
<span id="cb3-32"><a></a></span>
<span id="cb3-33"><a></a>    <span class="cf">for</span> period <span class="kw">in</span> <span class="bu">range</span>(total_periods):</span>
<span id="cb3-34"><a></a>        <span class="co"># Total return on the asset (positive or negative)</span></span>
<span id="cb3-35"><a></a>        total_return <span class="op">=</span> notional <span class="op">*</span> asset_returns[period]</span>
<span id="cb3-36"><a></a>        total_returns[period] <span class="op">=</span> total_return</span>
<span id="cb3-37"><a></a></span>
<span id="cb3-38"><a></a>        <span class="co"># Net payment for the TRS receiver (positive if receiving total return, minus fixed payment)</span></span>
<span id="cb3-39"><a></a>        payments[period] <span class="op">=</span> total_return <span class="op">+</span> periodic_fixed_payment</span>
<span id="cb3-40"><a></a></span>
<span id="cb3-41"><a></a>    <span class="cf">return</span> time_points, payments, total_returns</span>
<span id="cb3-42"><a></a></span>
<span id="cb3-43"><a></a></span>
<span id="cb3-44"><a></a><span class="co"># Simulate TRS payments with different asset volatilities</span></span>
<span id="cb3-45"><a></a>volatilities <span class="op">=</span> [<span class="fl">0.05</span>]  <span class="co"># Different volatilities to simulate</span></span>
<span id="cb3-46"><a></a>simulations <span class="op">=</span> {}</span>
<span id="cb3-47"><a></a></span>
<span id="cb3-48"><a></a><span class="cf">for</span> vol <span class="kw">in</span> volatilities:</span>
<span id="cb3-49"><a></a>    timeline, payments, total_returns <span class="op">=</span> generate_trs_timeline(</span>
<span id="cb3-50"><a></a>        notional, fixed_rate, vol, years, periods_per_year</span>
<span id="cb3-51"><a></a>    )</span>
<span id="cb3-52"><a></a>    simulations[vol] <span class="op">=</span> payments</span>
<span id="cb3-53"><a></a></span>
<span id="cb3-54"><a></a><span class="co"># Plot the timelines as bar charts</span></span>
<span id="cb3-55"><a></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb3-56"><a></a>bar_width <span class="op">=</span> <span class="fl">0.2</span>  <span class="co"># Width of each bar</span></span>
<span id="cb3-57"><a></a></span>
<span id="cb3-58"><a></a><span class="co"># Generate bar charts for each volatility</span></span>
<span id="cb3-59"><a></a><span class="cf">for</span> idx, (vol, payments) <span class="kw">in</span> <span class="bu">enumerate</span>(simulations.items()):</span>
<span id="cb3-60"><a></a>    plt.bar(</span>
<span id="cb3-61"><a></a>        timeline <span class="op">+</span> idx <span class="op">*</span> bar_width <span class="op">*</span> <span class="fl">0.1</span>,</span>
<span id="cb3-62"><a></a>        payments,</span>
<span id="cb3-63"><a></a>        width<span class="op">=</span>bar_width,</span>
<span id="cb3-64"><a></a>        color<span class="op">=</span><span class="st">"#A6192E"</span>,</span>
<span id="cb3-65"><a></a>        label<span class="op">=</span><span class="ss">f"Volatility: </span><span class="sc">{</span>vol<span class="op">*</span><span class="dv">100</span><span class="sc">:.0f}</span><span class="ss">%"</span>,</span>
<span id="cb3-66"><a></a>    )</span>
<span id="cb3-67"><a></a></span>
<span id="cb3-68"><a></a><span class="co"># Customize the plot</span></span>
<span id="cb3-69"><a></a>plt.title(<span class="ss">f"</span><span class="sc">{</span>years<span class="sc">}</span><span class="ss">-Year Total Return Swap Payments Example"</span>)</span>
<span id="cb3-70"><a></a>plt.xlabel(<span class="st">"Time (Years)"</span>)</span>
<span id="cb3-71"><a></a>plt.ylabel(<span class="st">"Net Payment Amount ($)"</span>)</span>
<span id="cb3-72"><a></a>plt.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb3-73"><a></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb3-74"><a></a>plt.legend()</span>
<span id="cb3-75"><a></a></span>
<span id="cb3-76"><a></a><span class="co"># Show the plot</span></span>
<span id="cb3-77"><a></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-trs" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-trs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img data-src="index_files/figure-revealjs/fig-trs-output-1.png" width="1001" height="671">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-trs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Total Return Swap Payments Example
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="credit-swaps-pure-credit-swaps" class="slide level2">
<h2>Credit swaps: pure credit swaps</h2>
<p>Interest-rate sensitive element stripped out leaving only the credit risk.</p>
<p>Similar to buying an insurance:</p>
<ul>
<li>If default, the counterparty makes the default payment</li>
<li>If not default, the FI receives nothing from the counterparty.</li>
</ul>
<div class="cell" data-layout-align="default">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource default number-lines code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a></a>graph LR</span>
<span id="cb4-2"><a></a>    A[Other FI]</span>
<span id="cb4-3"><a></a>    B[FI lender]</span>
<span id="cb4-4"><a></a>    B -- Loan --&gt; C[Customer]</span>
<span id="cb4-5"><a></a>    subgraph Pure Credit Swap</span>
<span id="cb4-6"><a></a>    B -- Fee --&gt; A</span>
<span id="cb4-7"><a></a>    A -. Default payment .-&gt; B</span>
<span id="cb4-8"><a></a>    end</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewbox="-8 -8 554.796875 136.5" style="; display: block; margin: auto auto auto auto" xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="960" id="mermaid-figure-2" height="480">
<style>#mermaid-figure-2{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-figure-2 .error-icon{fill:#552222;}#mermaid-figure-2 .error-text{fill:#552222;stroke:#552222;}#mermaid-figure-2 .edge-thickness-normal{stroke-width:2px;}#mermaid-figure-2 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-figure-2 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-figure-2 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-figure-2 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-figure-2 .marker{fill:#333333;stroke:#333333;}#mermaid-figure-2 .marker.cross{stroke:#333333;}#mermaid-figure-2 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-figure-2 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-figure-2 .cluster-label text{fill:#333;}#mermaid-figure-2 .cluster-label span,#mermaid-figure-2 p{color:#333;}#mermaid-figure-2 .label text,#mermaid-figure-2 span,#mermaid-figure-2 p{fill:#333;color:#333;}#mermaid-figure-2 .node rect,#mermaid-figure-2 .node circle,#mermaid-figure-2 .node ellipse,#mermaid-figure-2 .node polygon,#mermaid-figure-2 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-figure-2 .flowchart-label text{text-anchor:middle;}#mermaid-figure-2 .node .label{text-align:center;}#mermaid-figure-2 .node.clickable{cursor:pointer;}#mermaid-figure-2 .arrowheadPath{fill:#333333;}#mermaid-figure-2 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-figure-2 .flowchart-link{stroke:#333333;fill:none;}#mermaid-figure-2 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-figure-2 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-figure-2 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-figure-2 .cluster text{fill:#333;}#mermaid-figure-2 .cluster span,#mermaid-figure-2 p{color:#333;}#mermaid-figure-2 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-figure-2 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-figure-2 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style>
<g><marker orient="auto" markerheight="12" markerwidth="12" markerunits="userSpaceOnUse" refy="5" refx="10" viewbox="0 0 10 10" class="marker flowchart" id="flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerheight="12" markerwidth="12" markerunits="userSpaceOnUse" refy="5" refx="0" viewbox="0 0 10 10" class="marker flowchart" id="flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerheight="11" markerwidth="11" markerunits="userSpaceOnUse" refy="5" refx="11" viewbox="0 0 10 10" class="marker flowchart" id="flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerheight="11" markerwidth="11" markerunits="userSpaceOnUse" refy="5" refx="-1" viewbox="0 0 10 10" class="marker flowchart" id="flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerheight="11" markerwidth="11" markerunits="userSpaceOnUse" refy="5.2" refx="12" viewbox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerheight="11" markerwidth="11" markerunits="userSpaceOnUse" refy="5.2" refx="-1" viewbox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g id="subGraph0" class="cluster default flowchart-label"><rect height="120.5" width="372" y="0" x="0" ry="0" rx="0" style=""></rect><g transform="translate(124.2421875, 0)" class="cluster-label"><foreignobject height="19" width="123.515625">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Pure Credit Swap</span>
</div>
</foreignobject></g></g></g><g class="edgePaths"><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-C" id="L-B-C-0" d="M347,60.25L351.1666666666667,60.25C355.3333333333333,60.25,363.6666666666667,60.25,374.8203125,60.25C385.9739583333333,60.25,399.9479166666667,60.25,413.921875,60.25C427.8958333333333,60.25,441.8697916666667,60.25,448.8567708333333,60.25L455.84375,60.25"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-A" id="L-B-A-0" d="M268.28125,66.42673687519648L254.13151041666666,68.6472807293304C239.98177083333334,70.86782458346433,211.68229166666666,75.30891229173216,183.3828125,75.2611356577479C155.08333333333334,75.21335902376364,126.78385416666667,70.6767180475273,112.63411458333333,68.40839755940912L98.484375,66.14007707129095"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;stroke-width:2px;stroke-dasharray:3;" class="edge-thickness-normal edge-pattern-dotted flowchart-link LS-A LE-B" id="L-A-B-0" d="M98.484375,54.359922928709054L112.63411458333333,52.09160244059088C126.78385416666667,49.823281952472705,155.08333333333334,45.286640976236356,183.3828125,45.2388643422521C211.68229166666666,45.191087708267844,239.98177083333334,49.63217541653568,254.13151041666666,51.8527192706696L268.28125,54.07326312480352"></path></g><g class="edgeLabels"><g transform="translate(413.921875, 60.25)" class="edgeLabel"><g transform="translate(-16.921875, -9.5)" class="label"><foreignobject height="19" width="33.84375">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="edgeLabel">Loan</span>
</div>
</foreignobject></g></g><g transform="translate(183.3828125, 79.75)" class="edgeLabel"><g transform="translate(-12.9296875, -9.5)" class="label"><foreignobject height="19" width="25.859375">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="edgeLabel">Fee</span>
</div>
</foreignobject></g></g><g transform="translate(183.3828125, 40.75)" class="edgeLabel"><g transform="translate(-59.8984375, -9.5)" class="label"><foreignobject height="19" width="119.796875">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="edgeLabel">Default payment</span>
</div>
</foreignobject></g></g></g><g class="nodes"><g transform="translate(61.7421875, 60.25)" id="flowchart-A-16" class="node default default flowchart-label"><rect height="34" width="73.484375" y="-17" x="-36.7421875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-29.2421875, -9.5)" style="" class="label"><rect></rect><foreignobject height="19" width="58.484375">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Other FI</span>
</div>
</foreignobject></g></g><g transform="translate(307.640625, 60.25)" id="flowchart-B-17" class="node default default flowchart-label"><rect height="34" width="78.71875" y="-17" x="-39.359375" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-31.859375, -9.5)" style="" class="label"><rect></rect><foreignobject height="19" width="63.71875">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">FI lender</span>
</div>
</foreignobject></g></g><g transform="translate(497.3203125, 60.25)" id="flowchart-C-19" class="node default default flowchart-label"><rect height="34" width="82.953125" y="-17" x="-41.4765625" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-33.9765625, -9.5)" style="" class="label"><rect></rect><foreignobject height="19" width="67.953125">
<div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Customer</span>
</div>
</foreignobject></g></g></g></g></g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="credit-swaps-pure-credit-swaps-contd" class="slide level2">
<h2>Credit swaps: pure credit swaps (cont’d)</h2>
<div id="cell-fig-pure-cds" class="cell" data-fig-location="center" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb5-2"><a></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb5-3"><a></a></span>
<span id="cb5-4"><a></a>np.random.seed(<span class="dv">8003</span>)</span>
<span id="cb5-5"><a></a><span class="co"># Parameters for the CDS</span></span>
<span id="cb5-6"><a></a>notional <span class="op">=</span> <span class="dv">1_000_000</span>  <span class="co"># Notional amount (1 million)</span></span>
<span id="cb5-7"><a></a>cds_spread <span class="op">=</span> <span class="fl">0.02</span>  <span class="co"># Annual CDS spread (2%)</span></span>
<span id="cb5-8"><a></a>recovery_rate <span class="op">=</span> <span class="fl">0.9</span>  <span class="co"># Recovery rate in case of default (10%)</span></span>
<span id="cb5-9"><a></a>years <span class="op">=</span> <span class="dv">5</span>  <span class="co"># Time period of the CDS (5 years)</span></span>
<span id="cb5-10"><a></a>periods_per_year <span class="op">=</span> <span class="dv">4</span>  <span class="co"># Payments per year (quarterly)</span></span>
<span id="cb5-11"><a></a></span>
<span id="cb5-12"><a></a></span>
<span id="cb5-13"><a></a><span class="co"># Generate the timeline for CDS payments</span></span>
<span id="cb5-14"><a></a><span class="kw">def</span> generate_cds_timeline(</span>
<span id="cb5-15"><a></a>    notional, cds_spread, default_probability, recovery_rate, years, periods_per_year<span class="op">=</span><span class="dv">4</span></span>
<span id="cb5-16"><a></a>):</span>
<span id="cb5-17"><a></a>    <span class="co"># Set up the timeline with quarterly periods</span></span>
<span id="cb5-18"><a></a>    total_periods <span class="op">=</span> periods_per_year <span class="op">*</span> years</span>
<span id="cb5-19"><a></a>    time_points <span class="op">=</span> np.arange(<span class="dv">1</span>, total_periods <span class="op">+</span> <span class="dv">1</span>) <span class="op">/</span> periods_per_year</span>
<span id="cb5-20"><a></a></span>
<span id="cb5-21"><a></a>    <span class="co"># Calculate the periodic payment amount (quarterly)</span></span>
<span id="cb5-22"><a></a>    periodic_payment <span class="op">=</span> (</span>
<span id="cb5-23"><a></a>        <span class="op">-</span>notional <span class="op">*</span> cds_spread <span class="op">/</span> periods_per_year</span>
<span id="cb5-24"><a></a>    )  <span class="co"># Negative for payments</span></span>
<span id="cb5-25"><a></a></span>
<span id="cb5-26"><a></a>    <span class="co"># Initialize lists to store the results</span></span>
<span id="cb5-27"><a></a>    payments <span class="op">=</span> np.zeros(total_periods)</span>
<span id="cb5-28"><a></a></span>
<span id="cb5-29"><a></a>    <span class="co"># Simulate payments and default events</span></span>
<span id="cb5-30"><a></a>    <span class="cf">for</span> period <span class="kw">in</span> <span class="bu">range</span>(total_periods):</span>
<span id="cb5-31"><a></a>        <span class="cf">if</span> np.random.rand() <span class="op">&lt;</span> default_probability <span class="op">/</span> periods_per_year:</span>
<span id="cb5-32"><a></a>            <span class="co"># Default occurs at this period</span></span>
<span id="cb5-33"><a></a>            default_loss <span class="op">=</span> notional <span class="op">*</span> (</span>
<span id="cb5-34"><a></a>                <span class="dv">1</span> <span class="op">-</span> recovery_rate</span>
<span id="cb5-35"><a></a>            )  <span class="co"># Positive for the payment received on default</span></span>
<span id="cb5-36"><a></a>            payments[period] <span class="op">=</span> default_loss</span>
<span id="cb5-37"><a></a>            payments[period <span class="op">+</span> <span class="dv">1</span> :] <span class="op">=</span> <span class="dv">0</span>  <span class="co"># No more payments after default</span></span>
<span id="cb5-38"><a></a>            <span class="cf">break</span></span>
<span id="cb5-39"><a></a>        <span class="cf">else</span>:</span>
<span id="cb5-40"><a></a>            <span class="co"># Regular payment</span></span>
<span id="cb5-41"><a></a>            payments[period] <span class="op">=</span> periodic_payment</span>
<span id="cb5-42"><a></a></span>
<span id="cb5-43"><a></a>    <span class="cf">return</span> time_points, payments</span>
<span id="cb5-44"><a></a></span>
<span id="cb5-45"><a></a></span>
<span id="cb5-46"><a></a><span class="co"># Simulate multiple series with different default probabilities</span></span>
<span id="cb5-47"><a></a>default_probabilities <span class="op">=</span> [<span class="fl">0.02</span>, <span class="fl">0.1</span>]  <span class="co"># Different default probabilities</span></span>
<span id="cb5-48"><a></a>colors <span class="op">=</span> [<span class="st">"#D6D2C4"</span>, <span class="st">"#A6192E"</span>]</span>
<span id="cb5-49"><a></a></span>
<span id="cb5-50"><a></a>simulations <span class="op">=</span> {}</span>
<span id="cb5-51"><a></a></span>
<span id="cb5-52"><a></a><span class="co"># Generate timelines for each default probability</span></span>
<span id="cb5-53"><a></a><span class="cf">for</span> prob <span class="kw">in</span> default_probabilities:</span>
<span id="cb5-54"><a></a>    timeline, payments <span class="op">=</span> generate_cds_timeline(</span>
<span id="cb5-55"><a></a>        notional, cds_spread, prob, recovery_rate, years, periods_per_year</span>
<span id="cb5-56"><a></a>    )</span>
<span id="cb5-57"><a></a>    simulations[prob] <span class="op">=</span> payments</span>
<span id="cb5-58"><a></a></span>
<span id="cb5-59"><a></a><span class="co"># Plot the timelines as bar charts</span></span>
<span id="cb5-60"><a></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb5-61"><a></a>bar_width <span class="op">=</span> <span class="fl">0.2</span>  <span class="co"># Width of each bar</span></span>
<span id="cb5-62"><a></a></span>
<span id="cb5-63"><a></a><span class="co"># Generate bar charts for each probability</span></span>
<span id="cb5-64"><a></a><span class="cf">for</span> idx, (prob, payments) <span class="kw">in</span> <span class="bu">enumerate</span>(simulations.items()):</span>
<span id="cb5-65"><a></a>    plt.bar(</span>
<span id="cb5-66"><a></a>        timeline <span class="op">+</span> idx <span class="op">*</span> bar_width <span class="op">*</span> <span class="fl">0.1</span>,</span>
<span id="cb5-67"><a></a>        payments,</span>
<span id="cb5-68"><a></a>        width<span class="op">=</span>bar_width,</span>
<span id="cb5-69"><a></a>        color<span class="op">=</span>colors[idx],</span>
<span id="cb5-70"><a></a>        label<span class="op">=</span><span class="ss">f"Default Probability: </span><span class="sc">{</span>prob<span class="op">*</span><span class="dv">100</span><span class="sc">:.0f}</span><span class="ss">%"</span>,</span>
<span id="cb5-71"><a></a>    )</span>
<span id="cb5-72"><a></a></span>
<span id="cb5-73"><a></a>plt.title(<span class="ss">f"</span><span class="sc">{</span>years<span class="sc">}</span><span class="ss">-Year Pure CDS Payments Example"</span>)</span>
<span id="cb5-74"><a></a>plt.xlabel(<span class="st">"Time (Years)"</span>)</span>
<span id="cb5-75"><a></a>plt.ylabel(<span class="st">"Payment Amount ($)"</span>)</span>
<span id="cb5-76"><a></a>plt.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb5-77"><a></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb5-78"><a></a>plt.legend()</span>
<span id="cb5-79"><a></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-pure-cds" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-pure-cds-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img data-src="index_files/figure-revealjs/fig-pure-cds-output-1.png" width="990" height="671">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pure-cds-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Pure CDS Payments Example
</figcaption>
</figure>
</div>
</div>
</div>
</section></section>
<section>
<section id="finally" class="title-slide slide level1 center">
<h1>Finally…</h1>

</section>
<section id="suggested-readings" class="slide level2">
<h2>Suggested readings</h2>
<ul>
<li><a href="https://www.moodys.com/web/en/us/insights/resources/overview-of-modeling-credit-portfolios.pdf">Moody’s Analytics An Overview of Modelling Credit Portfolios</a></li>
</ul>
</section>
<section id="references" class="slide level2 smaller scrollable">
<h2>References</h2>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p>AFIN8003 Banking and Financial Intermediation</p>
</div>
</div>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-saunders_financial_2023" class="csl-entry" role="listitem">
Saunders, Anthony, Marcia Millon Cornett, and Otgo Erhemjamts. 2023. <em>Financial <span>Institutions</span> <span>Management</span> <span>ISE</span></em>. 11th ed. McGraw Hill.
</div>
</div>
</section></section>

    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1920,

        height: 1080,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/mingze-gao\.com");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>