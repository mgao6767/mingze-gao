<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.47">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Mingze Gao">
<meta name="dcterms.date" content="2024-08-14">

<title>AFIN8003 - Workshop 4 – Mingze Gao</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<link href="../../../../images/favicon.png" rel="icon" type="image/png">
<script src="../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-1QDTTQ6EHM"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1QDTTQ6EHM', { 'anonymize_ip': true});
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../../styles.css">
<meta name="twitter:title" content="AFIN8003 - Workshop 4 – Mingze Gao">
<meta name="twitter:description" content="Banking and Financial Intermediation">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../../images/favicon.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../cv/index.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../research/index.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../posts/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../teaching/index.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#recap" id="toc-recap" class="nav-link active" data-scroll-target="#recap">Recap</a></li>
  <li><a href="#mcq---repricing-model" id="toc-mcq---repricing-model" class="nav-link" data-scroll-target="#mcq---repricing-model">MCQ - Repricing model</a></li>
  <li><a href="#mcq---duration-model" id="toc-mcq---duration-model" class="nav-link" data-scroll-target="#mcq---duration-model">MCQ - Duration model</a></li>
  <li><a href="#short-answer-questions" id="toc-short-answer-questions" class="nav-link" data-scroll-target="#short-answer-questions">Short answer questions</a>
  <ul class="collapse">
  <li><a href="#q1---repricing-gap" id="toc-q1---repricing-gap" class="nav-link" data-scroll-target="#q1---repricing-gap">Q1 - Repricing gap</a></li>
  <li><a href="#q2---repricing-model" id="toc-q2---repricing-model" class="nav-link" data-scroll-target="#q2---repricing-model">Q2 - Repricing model</a></li>
  <li><a href="#q3---duration-model" id="toc-q3---duration-model" class="nav-link" data-scroll-target="#q3---duration-model">Q3 - Duration model</a></li>
  </ul></li>
  <li><a href="#extra" id="toc-extra" class="nav-link" data-scroll-target="#extra">Extra</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Workshop4.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">AFIN8003 - Workshop 4</h1>
<p class="subtitle lead">Banking and Financial Intermediation</p>
  <div class="quarto-categories">
    <div class="quarto-category">AFIN8003</div>
    <div class="quarto-category">2024S2</div>
  </div>
  </div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Dr.&nbsp;Mingze Gao </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Department of Applied Finance
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 14, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="recap" class="level1">
<h1>Recap</h1>
<ol type="1">
<li>What is interest rate risk for banks and what are the primary sources of interest rate risk?</li>
<li>How does interest rate risk impact a bank’s balance sheet and income statement?</li>
<li>What is maturity gap and how does it affect a bank’s exposure to interest rate risk?</li>
<li>What are the key models used by banks to measure interest rate risk?</li>
<li>How do Basel III guidelines address the issue of interest rate risk?</li>
</ol>
</section>
<section id="mcq---repricing-model" class="level1">
<h1>MCQ - Repricing model</h1>
<ol type="1">
<li><p>Because of its simplicity, the Australian Prudential Regulation Authority (APRA) requires smaller ADIs to use _______ as their primary measureof interest rate risk.</p>
<ul class="task-list">
<li><label><input type="checkbox">the maturity model</label></li>
<li><label><input type="checkbox">the repricing model</label></li>
<li><label><input type="checkbox">the duration model</label></li>
<li><label><input type="checkbox">the option pricing model</label></li>
</ul></li>
<li><p>The difference between the dollar amount of assets whose interest rates will change and the dollar amount of liabilities whose interest rateswill change when market rates change in some given time window is:</p>
<ul class="task-list">
<li><label><input type="checkbox">rate-sensitive assets</label></li>
<li><label><input type="checkbox">the repricing gap</label></li>
<li><label><input type="checkbox">rate-sensitive liabilities</label></li>
<li><label><input type="checkbox">the duration gap</label></li>
</ul></li>
<li><p>A positive gap implies that a decrease in interest rates will cause _______ in net interest income</p>
<ul class="task-list">
<li><label><input type="checkbox">decrease</label></li>
<li><label><input type="checkbox">increase</label></li>
<li><label><input type="checkbox">no change</label></li>
<li><label><input type="checkbox">an uncertain change</label></li>
</ul></li>
<li><p>Mingze Bank has a repricing gap of -$400 million. Interest rates are expected to increase by 1 per cent. What will be the impact on the bank’s net interest income (NII)?</p>
<ul class="task-list">
<li><label><input type="checkbox">4 million</label></li>
<li><label><input type="checkbox">2 million</label></li>
<li><label><input type="checkbox">-2 million</label></li>
<li><label><input type="checkbox">-4 million</label></li>
</ul></li>
<li><p>An FI operating with a negative gap implies that management expects interest rates</p>
<ul class="task-list">
<li><label><input type="checkbox">to decrease</label></li>
<li><label><input type="checkbox">to increase</label></li>
<li><label><input type="checkbox">to not change</label></li>
<li><label><input type="checkbox">to have an uncertain change</label></li>
</ul></li>
<li><p>Ignoring information regarding the distribution of assets and liabilities within buckets when defining buckets over a range of maturities is the problem of:</p>
<ul class="task-list">
<li><label><input type="checkbox">runoff</label></li>
<li><label><input type="checkbox">ignoring cash flows from off-balance-sheet activities</label></li>
<li><label><input type="checkbox">over-aggregation</label></li>
<li><label><input type="checkbox">market value effects</label></li>
</ul></li>
<li><p>The repricing model:</p>
<ul class="task-list">
<li><label><input type="checkbox">implicitly assumes book value accounting</label></li>
<li><label><input type="checkbox">is over-aggregative</label></li>
<li><label><input type="checkbox">ignores the problem of runoffs</label></li>
<li><label><input type="checkbox">All of the listed options are correct.</label></li>
</ul></li>
</ol>
</section>
<section id="mcq---duration-model" class="level1">
<h1>MCQ - Duration model</h1>
<ol type="1">
<li><p>A measure of the weighted-average time to maturity on an asset using the relative present values of the cash flows as weights is:</p>
<ul class="task-list">
<li><label><input type="checkbox">average maturity</label></li>
<li><label><input type="checkbox">duration</label></li>
<li><label><input type="checkbox">the Monte Carlo simulation</label></li>
<li><label><input type="checkbox">the funding gap</label></li>
</ul></li>
<li><p>An FI has invested in a five-year, zero-coupon bond that is selling to yield 6 per cent. What is the duration of this bond?</p>
<ul class="task-list">
<li><label><input type="checkbox">less than 5 years</label></li>
<li><label><input type="checkbox">more than 5 years</label></li>
<li><label><input type="checkbox">exactly 5 years</label></li>
<li><label><input type="checkbox">less than 5 years only if using semi-annual compounding</label></li>
</ul></li>
<li><p>An FI has invested $400 in an asset with a duration of 2 years and $600 in an asset with a duration of 4 years. What is the duration of the total assets?</p>
<ul class="task-list">
<li><label><input type="checkbox">3 years</label></li>
<li><label><input type="checkbox">0.8 years</label></li>
<li><label><input type="checkbox">2.4 years</label></li>
<li><label><input type="checkbox">3.2 years</label></li>
</ul></li>
<li><p>Duration increases with the maturity of a fixed-income asset:</p>
<ul class="task-list">
<li><label><input type="checkbox">at a decreasing rate</label></li>
<li><label><input type="checkbox">at a constant rate</label></li>
<li><label><input type="checkbox">at an increasing rate</label></li>
<li><label><input type="checkbox">and can become infinite</label></li>
</ul></li>
<li><p>The higher the coupon or promised interest payment is on a fixed-income asset:</p>
<ul class="task-list">
<li><label><input type="checkbox">the higher the duration</label></li>
<li><label><input type="checkbox">the more likely it is that impact on duration cannot be determined</label></li>
<li><label><input type="checkbox">the lower the duration</label></li>
<li><label><input type="checkbox">the more likely it is that the duration will eventually become negative</label></li>
</ul></li>
<li><p>If interest rate shocks leave the value of an FI’s equity unaffected, then:</p>
<ul class="task-list">
<li><label><input type="checkbox">the duration of its assets must equal the duration of its liabilities</label></li>
<li><label><input type="checkbox">its duration gap must be positive</label></li>
<li><label><input type="checkbox">its leverage adjusted duration gap must be positive</label></li>
<li><label><input type="checkbox">its leverage adjusted duration gap must be zero</label></li>
</ul></li>
<li><p>The effect of interest rate changes on the market value of an FI’s equity is determined by:</p>
<ul class="task-list">
<li><label><input type="checkbox">the size of the interest rate shock</label></li>
<li><label><input type="checkbox">the size of the FI</label></li>
<li><label><input type="checkbox">the leverage adjusted duration gap</label></li>
<li><label><input type="checkbox">All of the listed options are correct.</label></li>
</ul></li>
<li><p>In order for an FI manager to immunise the net worth ratio against interest rate shocks, then the:</p>
<ul class="task-list">
<li><label><input type="checkbox">duration of assets must equal the duration of liabilities</label></li>
<li><label><input type="checkbox">duration gap must be positive</label></li>
<li><label><input type="checkbox">leverage adjusted duration gap must be positive</label></li>
<li><label><input type="checkbox">leverage adjusted duration gap must be zero</label></li>
</ul></li>
<li><p>The duration model:</p>
<ul class="task-list">
<li><label><input type="checkbox">underestimates price decreases</label></li>
<li><label><input type="checkbox">overestimates price increases</label></li>
<li><label><input type="checkbox">is more accurate for large interest rate changes because of its price–yield convexity assumption</label></li>
<li><label><input type="checkbox">is less accurate for large interest rate changes because of its price–yield linearity assumption</label></li>
</ul></li>
<li><p>The larger the duration for an asset or liability:</p>
<ul class="task-list">
<li><label><input type="checkbox">the higher the return on the asset</label></li>
<li><label><input type="checkbox">the lower the interest cost of the liability</label></li>
<li><label><input type="checkbox">the higher the interest rate sensitivity of that asset or liability</label></li>
<li><label><input type="checkbox">the lower the interest rate sensitivity of that asset or liability</label></li>
</ul></li>
<li><p>Which of the following assets or liabilities fit the one‑year rate or repricing sensitivity test?</p>
<ul class="task-list">
<li><label><input type="checkbox">91-day treasury notes</label></li>
<li><label><input type="checkbox">One-year treasury bonds</label></li>
<li><label><input type="checkbox">20-year treasury bonds</label></li>
<li><label><input type="checkbox">20-year floating-rate corporate bonds with annual repricing</label></li>
<li><label><input type="checkbox">30-year floating-rate mortgages with annual repricing</label></li>
<li><label><input type="checkbox">30-year floating-rate mortgages with biannual repricing</label></li>
<li><label><input type="checkbox">overnight interbank funds</label></li>
<li><label><input type="checkbox">nine-month fixed-rate term deposits</label></li>
<li><label><input type="checkbox">one-year fixed rate term deposits</label></li>
<li><label><input type="checkbox">five-year floating-rate corporate bonds with annual repricing</label></li>
<li><label><input type="checkbox">common equity</label></li>
</ul></li>
</ol>
</section>
<section id="short-answer-questions" class="level1">
<h1>Short answer questions</h1>
<section id="q1---repricing-gap" class="level2">
<h2 class="anchored" data-anchor-id="q1---repricing-gap">Q1 - Repricing gap</h2>
<p>A bank manager is quite certain that interest rates are going to fall within the next six months. How should the bank manager adjust the ban’s six-month repricing gap and spread to take advantage of this anticipated rise? What if the manger believes rates will rise in the next six months?</p>
</section>
<section id="q2---repricing-model" class="level2">
<h2 class="anchored" data-anchor-id="q2---repricing-model">Q2 - Repricing model</h2>
<p>Consider the following balance sheet for Mingze Bank (in millions):</p>
<table class="table">
<colgroup>
<col style="width: 34%">
<col style="width: 10%">
<col style="width: 44%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Assets</strong></th>
<th><strong>$</strong></th>
<th><strong>Liabilities and equity</strong></th>
<th><strong>$</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Floating-rate mortgages</td>
<td>50</td>
<td>1-year term deposits</td>
<td>70</td>
</tr>
<tr class="even">
<td>(currently 10% annually)</td>
<td></td>
<td>(currently 6% annually)</td>
<td></td>
</tr>
<tr class="odd">
<td>30-year fixed-rate loans</td>
<td>50</td>
<td>3-year term deposits</td>
<td>20</td>
</tr>
<tr class="even">
<td>(currently 7% annually)</td>
<td></td>
<td>(currently 7% annually)</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td><strong>Equity</strong></td>
<td>10</td>
</tr>
<tr class="even">
<td><strong>Total assets</strong></td>
<td>100</td>
<td><strong>Total liabilities and equity</strong></td>
<td>100</td>
</tr>
</tbody>
</table>
<ol type="a">
<li>What is Mingze Bank’s expected net interest income at year-end?</li>
<li>What will net interest income be at year-end if interest rates rise by 2 per cent?</li>
<li>Using the cumulative repricing gap model, what is the expected net interest income for a 2 per cent increase in interest rates?</li>
<li>What will net interest income be at year-end if interest rates on RSAs increase by 2 per cent but interest rates on RSLs increase by 1 percent? Is it reasonable for changes in interest rates on RSAs and RSLs to differ? Why?</li>
</ol>
</section>
<section id="q3---duration-model" class="level2">
<h2 class="anchored" data-anchor-id="q3---duration-model">Q3 - Duration model</h2>
<p>The following balance sheet information is available (amounts in thousands of dollars and duration in years) for a financial institution:</p>
<table class="table">
<thead>
<tr class="header">
<th><strong>Item</strong></th>
<th><strong>Amount</strong></th>
<th><strong>Duration</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>T-notes</td>
<td>$90</td>
<td>0.50</td>
</tr>
<tr class="even">
<td>T-notes</td>
<td>$55</td>
<td>0.90</td>
</tr>
<tr class="odd">
<td>T-notes (5 year)</td>
<td>$176</td>
<td>4.3931</td>
</tr>
<tr class="even">
<td>Loans</td>
<td>$2724</td>
<td>7.00</td>
</tr>
<tr class="odd">
<td>Deposits</td>
<td>$2092</td>
<td>1.00</td>
</tr>
<tr class="even">
<td>Interbank borrowings</td>
<td>$238</td>
<td>0.01</td>
</tr>
<tr class="odd">
<td>Equity</td>
<td>$715</td>
<td></td>
</tr>
</tbody>
</table>
<ol type="a">
<li>What is the average duration of all the assets?</li>
<li>What is the average duration of all the liabilities?</li>
<li>What is the leverage adjusted duration gap? What is the interest rate risk exposure?</li>
<li>What is the forecasted impact on the market value of equity caused by a relative upward shift in the entire yield curve of 0.5 percent? That is, <span class="math inline">\(\frac{\Delta R}{1+R}=0.0050\)</span>.</li>
<li>What variables are available to the financial institution to immunize the balance sheet? How much would each variable need to change to get duration gap equal to 0?</li>
</ol>
</section>
</section>
<section id="extra" class="level1">
<h1>Extra</h1>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a somewhat challenging question. Please take time to work it through.</p>
</div>
</div>
<p>Two banks are being examined by regulators to determine the interest rate sensitivity of their balance sheets. Bank A has assets composed solely of a 10-year $1 million loan with a coupon rate and yield of 12 per cent. The loan is financed with a 10-year $1 million CD with a coupon rate and yield of 10 per cent. Bank B has assets composed solely of a 7-year, 12 per cent zero-coupon bond with a current (market) value of $894 006.20 and a maturity (principal) value of $1 976 362.88. The bond is financed with a 10-year, 8.275 per cent coupon $1 000 000 face value CD with a yield to maturity of 10 per cent. The loan and the CDs pay interest annually, with principal due at maturity.</p>
<ol type="a">
<li>If market interest rates increase 1 per cent (100 basis points), how do the market values of the assets and liabilities of each bank change? That is, what will be the net effect on the market value of the equity for each bank?</li>
<li>What accounts for the differences in the changes in the market value of equity between the two banks?</li>
<li>Verify your results above by calculating the duration for the assets and liabilities of each bank, and estimate the changes in value for the expected change in interest rates. Summarize your results.</li>
</ol>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/mingze-gao\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright © 2019 - 2024 Mingze Gao</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mgao6767">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/AdrianMingzeGao">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/adriangao/">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:mingze.gao@mq.edu.au">
      <i class="bi bi-send" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>