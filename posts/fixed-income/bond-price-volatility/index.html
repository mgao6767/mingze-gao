<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.54">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mingze Gao">
<meta name="dcterms.date" content="2023-12-15">

<title>Bond Price Volatility (Sensitivity) – Mingze Gao</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../images/favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-1QDTTQ6EHM"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1QDTTQ6EHM', { 'anonymize_ip': true});
</script>
<script type="module" src="../../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../styles.css">
<meta name="twitter:title" content="Bond Price Volatility (Sensitivity) – Mingze Gao">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://mingze-gao.com/posts/fixed-income/bond-price-volatility/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../images/favicon.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../cv/index.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../research/index.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../posts/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../teaching/index.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../posts/fixed-income/introduction/index.html">Fixed Income</a></li><li class="breadcrumb-item"><a href="../../../posts/fixed-income/bond-price-volatility/index.html">Bond Price Volatility (Sensitivity)</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Fixed Income</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/fixed-income/introduction/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Fixed Income Securities</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/fixed-income/bond-prices-and-yields/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bond Prices and Yields</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/fixed-income/bond-price-volatility/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Bond Price Volatility (Sensitivity)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/fixed-income/yield-curve/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Yield Curve and Term Structure of Interest Rates</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Stata Workshop</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/stata/introduction/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stata - Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/stata/packages/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stata - Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/stata/working-with-datasets/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stata - Working with datasets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/fred/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FRED - Federal Reserve Economic Data</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#price-sensitivity-to-yield" id="toc-price-sensitivity-to-yield" class="nav-link active" data-scroll-target="#price-sensitivity-to-yield">Price sensitivity to yield</a></li>
  <li><a href="#measure-of-price-yield-sensitivity-duration" id="toc-measure-of-price-yield-sensitivity-duration" class="nav-link" data-scroll-target="#measure-of-price-yield-sensitivity-duration">Measure of price-yield sensitivity: Duration</a>
  <ul class="collapse">
  <li><a href="#macaulay-duration" id="toc-macaulay-duration" class="nav-link" data-scroll-target="#macaulay-duration">Macaulay Duration</a></li>
  <li><a href="#modified-duration" id="toc-modified-duration" class="nav-link" data-scroll-target="#modified-duration">Modified Duration</a></li>
  <li><a href="#how-to-use-durations" id="toc-how-to-use-durations" class="nav-link" data-scroll-target="#how-to-use-durations">How to use durations?</a></li>
  <li><a href="#duration-of-a-bond-portfolio" id="toc-duration-of-a-bond-portfolio" class="nav-link" data-scroll-target="#duration-of-a-bond-portfolio">Duration of a bond portfolio</a></li>
  </ul></li>
  <li><a href="#adjusting-for-convexity" id="toc-adjusting-for-convexity" class="nav-link" data-scroll-target="#adjusting-for-convexity">Adjusting for Convexity</a>
  <ul class="collapse">
  <li><a href="#impact-of-coupon-rate-on-convexity" id="toc-impact-of-coupon-rate-on-convexity" class="nav-link" data-scroll-target="#impact-of-coupon-rate-on-convexity">Impact of coupon rate on convexity</a></li>
  </ul></li>
  <li><a href="#approximating-duration-and-convexity" id="toc-approximating-duration-and-convexity" class="nav-link" data-scroll-target="#approximating-duration-and-convexity">Approximating duration and convexity</a>
  <ul class="collapse">
  <li><a href="#duration-approximation" id="toc-duration-approximation" class="nav-link" data-scroll-target="#duration-approximation">Duration approximation</a></li>
  <li><a href="#convexity-approximation" id="toc-convexity-approximation" class="nav-link" data-scroll-target="#convexity-approximation">Convexity approximation</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../posts/fixed-income/introduction/index.html">Fixed Income</a></li><li class="breadcrumb-item"><a href="../../../posts/fixed-income/bond-price-volatility/index.html">Bond Price Volatility (Sensitivity)</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Bond Price Volatility (Sensitivity)</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Teaching Notes</div>
  </div>
  </div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Mingze Gao, PhD <a href="mailto:mingze.gao@mq.edu.au" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0002-8635-4269" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Macquarie University
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 15, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>A (plain vanilla) bond’s price <span class="math inline">\(P\)</span> is nothing but a function of some input parameters, including coupon rate <span class="math inline">\(C\)</span>, time to maturity <span class="math inline">\(t\)</span>, yield <span class="math inline">\(y\)</span>, face value <span class="math inline">\(F\)</span>, among others:</p>
<p><span class="math display">\[
P=f(C,t,y,F)
\]</span></p>
<p>Now that we have discussed the pricing function <span class="math inline">\(f\)</span> in the <a href="../../../posts/fixed-income/bond-prices-and-yields/index.html">previous post</a>, it is very natural to think about how <span class="math inline">\(P\)</span> responds to changes in each of the input parameters. This is precisely an examination of the partial derivate of <span class="math inline">\(f\)</span> with respect to (w.r.t.) its parameters.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Why should we care about it?">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why should we care about it?
</div>
</div>
<div class="callout-body-container callout-body">
<p>As a manager of a bond portfolio, for example, you will need to understand the sensitivity of bond value: to which factors and by how much. This allows you to better manage the risk and build trading strategies.</p>
</div>
</div>
<p>Additionally, for a given bond, the coupon rate <span class="math inline">\(C\)</span> and face value <span class="math inline">\(F\)</span> will not change. That means we can primarily focus on a bond’s price sensitivity w.r.t. yield, and how the time to maturity <span class="math inline">\(t\)</span> and other parameters affect such sensitivity.</p>
<section id="price-sensitivity-to-yield" class="level2">
<h2 class="anchored" data-anchor-id="price-sensitivity-to-yield">Price sensitivity to yield</h2>
<p>As we have <a href="../../..\posts/fixed-income/bond-prices-and-yields/#price-and-yield-to-maturity">previously discussed</a>, a bond’s price and its yield has an <strong>inverse, non-linear</strong> relationship. More importantly, the non-linearity shows that <strong>the same unit change in yield has different impacts on bond’s price</strong>: the higher the yield is, the smaller the impact of a given unit change in yield, other things equal.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="29" data-source-offset="-3"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 28;"><span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>viewof maturity4 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>(</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  [<span class="dv">1</span><span class="op">,</span> <span class="dv">30</span>]<span class="op">,</span> </span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">value</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Maturity (years):"</span>}</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>viewof couponRate4 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>(</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.01</span><span class="op">,</span> <span class="fl">0.2</span>]<span class="op">,</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">value</span><span class="op">:</span> <span class="fl">0.05</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span><span class="st">"Coupon rate:"</span>}</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> {</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> f <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> c<span class="op">,</span> m<span class="op">;</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>  c <span class="op">=</span> couponRate4<span class="op">;</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>  m <span class="op">=</span> maturity4<span class="op">;</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">pv</span>(c<span class="op">,</span> f<span class="op">,</span> t<span class="op">,</span> r) {</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> (<span class="dv">1</span><span class="op">+</span>r)<span class="op">**</span>(<span class="op">-</span>t)) <span class="op">/</span> r <span class="op">+</span> f <span class="op">/</span> (<span class="dv">1</span><span class="op">+</span>r)<span class="op">**</span>(t)</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> prices <span class="op">=</span> {<span class="st">"YTM"</span><span class="op">:</span> []<span class="op">,</span> <span class="st">"Price"</span><span class="op">:</span> []}<span class="op">;</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> coupon <span class="op">=</span> f <span class="op">*</span> c<span class="op">;</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">let</span> ytm <span class="op">=</span> <span class="fl">0.01</span><span class="op">;</span> ytm <span class="op">&lt;</span> <span class="dv">20</span><span class="op">;</span> ytm<span class="op">++</span>) {</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> price <span class="op">=</span> <span class="fu">pv</span>(coupon<span class="op">,</span> f<span class="op">,</span> m<span class="op">,</span> ytm<span class="op">/</span><span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>    prices[<span class="st">"YTM"</span>]<span class="op">.</span><span class="fu">push</span>(ytm)<span class="op">;</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>    prices[<span class="st">"Price"</span>]<span class="op">.</span><span class="fu">push</span>(price)<span class="op">;</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> prices<span class="op">;</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>data4 <span class="op">=</span> <span class="fu">transpose</span>(d)</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>  <span class="dt">caption</span><span class="op">:</span> <span class="st">"Assume $100 bond, annual coupons paid in arrears and effective annual discount rate."</span><span class="op">,</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">padding</span><span class="op">:</span> <span class="fl">0.4</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"YTM (%)"</span>}<span class="op">,</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">100</span>])<span class="op">,</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleX</span>([<span class="dv">0</span>])<span class="op">,</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">lineY</span>(data4<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"YTM"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"Price"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"blue"</span>})<span class="op">,</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-5" data-nodetype="expression">

</div>
</div>
</div>
</div>
<p>This observation suggests that while the bond price is sensitive to yield, this sensitivity is not a constant.</p>
<div class="callout callout-style-default callout-note callout-titled" title="How to measure the bond price sensitivity to yield?">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How to measure the bond price sensitivity to yield?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Can we quantify such sensitivity?</p>
<p>Yes. It’s nothing but the partial derivate of bond price <span class="math inline">\(P=f(C,t,{\color{red}y},F)\)</span> w.r.t. yield <span class="math inline">\(\color{red}y\)</span>:</p>
<p><span class="math display">\[
\frac{\partial P}{\partial {\color{red}y}}
\]</span></p>
</div>
</div>
</section>
<section id="measure-of-price-yield-sensitivity-duration" class="level2">
<h2 class="anchored" data-anchor-id="measure-of-price-yield-sensitivity-duration">Measure of price-yield sensitivity: Duration</h2>
<section id="macaulay-duration" class="level3">
<h3 class="anchored" data-anchor-id="macaulay-duration">Macaulay Duration</h3>
<p>Let’s take a closer look at the bond price sensitivity to yield <span class="math inline">\(\frac{\partial P}{\partial y}\)</span>.</p>
<p>Recall that bond price <span class="math inline">\(P=f(C,t,{\color{red}y},F)\)</span>, so its partial derivative w.r.t. yield <span class="math inline">\(\color{red}y\)</span> is given by:</p>
<p><span class="math display">\[
\frac{\partial P}{\partial {\color{red}y}} =
\frac{\partial f}{\partial {\color{red}y}} =
\frac{\partial}{\partial {\color{red}y}}{\left[\sum_{\tau=1}^{n} \frac{C}{(1+{\color{red}y})^{\tau}} + \frac{F}{(1+{\color{red}y})^n}\right]}
\]</span></p>
<div class="callout callout-style-default callout-note callout-titled" title="Be not afraid - Ask ChatGPT to derive">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Be not afraid - Ask ChatGPT to derive
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Let’s differentiate the expression with respect to <span class="math inline">\(y\)</span> step by step:</p>
<p><span class="math display">\[
\begin{align*}
\frac{\partial}{\partial y} \left[\sum_{\tau=1}^{n} \frac{C}{(1+y)^{\tau}} + \frac{F}{(1+y)^n}\right] &amp;= \sum_{\tau=1}^{n} \frac{\partial}{\partial y} \left[\frac{C}{(1+y)^{\tau}}\right] + \frac{\partial}{\partial y} \left[\frac{F}{(1+y)^n}\right] \\
&amp;= \sum_{\tau=1}^{n} \left[-\frac{C \cdot \tau}{(1+y)^{\tau+1}}\right] + \left[-\frac{F \cdot n}{(1+y)^{n+1}}\right] \\
&amp;= -\sum_{\tau=1}^{n} \frac{C \cdot \tau}{(1+y)^{\tau+1}} - \frac{F \cdot n}{(1+y)^{n+1}} \\
&amp;= -\frac{1}{1+y}\left[\sum_{\tau=1}^{n} \frac{C \cdot \tau}{(1+y)^{\tau}} + \frac{F \cdot n}{(1+y)^n}\right]
\end{align*}
\]</span></p>
</div>
</div>
</div>
<p>Therefore, the price’s sensitivity to yield is:</p>
<p><span class="math display">\[
\frac{\partial P}{\partial y}= -\frac{1}{1+y}\left[\sum_{\tau=1}^{n} \frac{C \cdot \tau}{(1+y)^{\tau}} + \frac{F \cdot n}{(1+y)^n}\right]
\]</span></p>
<p>This formula is extremely interesting! Let’s see what I mean.</p>
<p>Check out the part <span class="math inline">\(\left[\sum_{\tau=1}^{n} \frac{C \cdot \tau}{(1+y)^{\tau}} + \frac{F \cdot n}{(1+y)^n}\right]\)</span>. It looks like we are multiplying the time period in each of the components in the original bond pricing formula - if we ignore the <span class="math inline">\(\tau\)</span> and <span class="math inline">\(n\)</span> in the numerators, it is exactly the formula. If we divide it by the bond price <span class="math inline">\(P\)</span>, we have:</p>
<p><span class="math display">\[
\begin{align*}
  &amp;\frac{1}{P}\left[\sum_{\tau=1}^{n} \frac{C \cdot \tau}{(1+y)^{\tau}} + \frac{F \cdot n}{(1+y)^n}\right] \\
  &amp;=\left[\sum_{\tau=1}^{n} \frac{C/(1+y)^{\tau}}{P} \cdot \tau+ \frac{F /(1+y)^n}{P}\cdot n\right] \\
  &amp;=\sum_{\tau=1}^{n} \underbrace{\frac{PV(\tau\text{-th coupon})}{P}}_{\text{weight of coupon}} \cdot \tau+ \underbrace{\frac{PV(\text{principal})}{P}}_{\text{weight of principal}}\cdot n \\
  &amp;=\sum_{\tau=1}^{n} w_{\tau} \cdot \tau+ w_{F} \cdot n \equiv \text{Macaulay Duration}
\end{align*}
\]</span></p>
<p>That is, a <strong>PV weighted average of time to receive a bond’s cashflows</strong>. Its name is <strong>Macaulay Duration</strong>.</p>
<p>Back to the initial formula of bond price sensitivity to yield:</p>
<p><span class="math display">\[
\begin{align*}
\frac{\partial P}{\partial y} &amp;= -\frac{1}{1+y}\left[\sum_{\tau=1}^{n} \frac{C \cdot \tau}{(1+y)^{\tau}} + \frac{F \cdot n}{(1+y)^n}\right]\\
&amp;=-\frac{1}{1+y} \left[P\times{\text{Macaulay Duration}}\right]
\end{align*}
\]</span></p>
</section>
<section id="modified-duration" class="level3">
<h3 class="anchored" data-anchor-id="modified-duration">Modified Duration</h3>
<p>If we define <strong>Modified Duration</strong> as</p>
<p><span class="math display">\[
\text{Modified Duration} = \frac{\text{Macaulay Duration}}{1+y}
\]</span></p>
<p>the above formula of bond price sensitivity to yield can be simplified to:</p>
<p><span class="math display">\[
\begin{align*}
\frac{\partial P}{\partial y}
&amp;=-\frac{1}{1+y} \left[P\times{\text{Macaulay Duration}}\right] \\
&amp;=-P\times{\text{Modified Duration}}
\end{align*}
\]</span></p>
</section>
<section id="how-to-use-durations" class="level3">
<h3 class="anchored" data-anchor-id="how-to-use-durations">How to use durations?</h3>
<p>We can now use durations to approximate the dollar or percentage change in bond price given a small change in yield. Specifically, for a small change in yield <span class="math inline">\(\Delta y\)</span>,</p>
<p>the dollar change in bond price <span class="math inline">\(\Delta P\)</span> is</p>
<p><span class="math display">\[
\Delta P = -P\times \text{Modified Duration} \times \Delta y
\]</span></p>
<p>and the percentage change <span class="math inline">\(\frac{\Delta P}{P}\)</span> is</p>
<p><span class="math display">\[
\frac{\Delta P}{P} = - \text{Modified Duration} \times \Delta y
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled" title="PV01">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
PV01
</div>
</div>
<div class="callout-body-container callout-body">
<p>People are particularly interested in the price movement of a bond given a one-basis-point change in yield, or <strong>PV01</strong>, which is essentially <span class="math inline">\(\Delta P\)</span> given <span class="math inline">\(\Delta y=0.0001\)</span>.</p>
</div>
</div>
</section>
<section id="duration-of-a-bond-portfolio" class="level3">
<h3 class="anchored" data-anchor-id="duration-of-a-bond-portfolio">Duration of a bond portfolio</h3>
<p>A good thing about duration is that it’s additive, meaning that the duration of a portfolio of bonds is simply the value-weighted average of individual bonds’ durations.</p>
</section>
</section>
<section id="adjusting-for-convexity" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="adjusting-for-convexity">Adjusting for Convexity</h2>
<p>Earlier we mentioned that the price-yield relationship is non-linear and <strong>convex</strong>. In simple terms, it means the sensitivity of bond price to yield is decreasing in yield, i.e., when yield is high, a given unit change in yield has a smaller impact on bond price.</p>
<p>Intuitively, <strong>as yield increases, bond duration decreases</strong>. So, looking at the bond price sensitivity formulae above, we can notice that <span class="math inline">\(\partial y\)</span> should also change durations, which were assumed constant. This failure to adjust bond duration when computing the price change due to yield change leads to an underestimation of true price. We can correct it by adjusting for bond convexity.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>From the graph below, we can see that using only duration to approximate bond price is like assuming a linear price-yield relation. Given that the price-yield relation is convex, this means we would underestimate the bond price. The vertical difference between the curved line and dotted straight line is where adjustment for convexity comes in.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="192" data-source-offset="-3"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 191;"><span id="cb2-192"><a href="#cb2-192" aria-hidden="true" tabindex="-1"></a>viewof maturity <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>(</span>
<span id="cb2-193"><a href="#cb2-193" aria-hidden="true" tabindex="-1"></a>  [<span class="dv">1</span><span class="op">,</span> <span class="dv">30</span>]<span class="op">,</span> </span>
<span id="cb2-194"><a href="#cb2-194" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">value</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Maturity (years):"</span>}</span>
<span id="cb2-195"><a href="#cb2-195" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-196"><a href="#cb2-196" aria-hidden="true" tabindex="-1"></a>viewof couponRate <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>(</span>
<span id="cb2-197"><a href="#cb2-197" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.01</span><span class="op">,</span> <span class="fl">0.2</span>]<span class="op">,</span></span>
<span id="cb2-198"><a href="#cb2-198" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">value</span><span class="op">:</span> <span class="fl">0.06</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span><span class="st">"Coupon rate:"</span>}</span>
<span id="cb2-199"><a href="#cb2-199" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-200"><a href="#cb2-200" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> {</span>
<span id="cb2-201"><a href="#cb2-201" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> f <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb2-202"><a href="#cb2-202" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">pv</span>(c<span class="op">,</span> f<span class="op">,</span> t<span class="op">,</span> r) {</span>
<span id="cb2-203"><a href="#cb2-203" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> (<span class="dv">1</span><span class="op">+</span>r)<span class="op">**</span>(<span class="op">-</span>t)) <span class="op">/</span> r <span class="op">+</span> f <span class="op">/</span> (<span class="dv">1</span><span class="op">+</span>r)<span class="op">**</span>(t)</span>
<span id="cb2-204"><a href="#cb2-204" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-205"><a href="#cb2-205" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> prices <span class="op">=</span> {<span class="st">"YTM"</span><span class="op">:</span> []<span class="op">,</span> <span class="st">"Price"</span><span class="op">:</span> []<span class="op">,</span> <span class="st">"PriceApproxByDuration"</span><span class="op">:</span> []<span class="op">,</span> <span class="st">"Duration"</span><span class="op">:</span> []}<span class="op">;</span></span>
<span id="cb2-206"><a href="#cb2-206" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> coupon <span class="op">=</span> f <span class="op">*</span> couponRate<span class="op">;</span></span>
<span id="cb2-207"><a href="#cb2-207" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> priceYTM6 <span class="op">=</span> <span class="fu">pv</span>(coupon<span class="op">,</span> f<span class="op">,</span> maturity<span class="op">,</span> <span class="dv">6</span><span class="op">/</span><span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb2-208"><a href="#cb2-208" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> priceYTM6_p01 <span class="op">=</span> <span class="fu">pv</span>(coupon<span class="op">,</span> f<span class="op">,</span> maturity<span class="op">,</span> <span class="fl">6.01</span><span class="op">/</span><span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb2-209"><a href="#cb2-209" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> priceYTM6_m01 <span class="op">=</span> <span class="fu">pv</span>(coupon<span class="op">,</span> f<span class="op">,</span> maturity<span class="op">,</span> <span class="fl">5.99</span><span class="op">/</span><span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb2-210"><a href="#cb2-210" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> duration <span class="op">=</span> (priceYTM6_m01 <span class="op">-</span> priceYTM6_p01) <span class="op">/</span> (<span class="dv">2</span> <span class="op">*</span> <span class="fl">0.01</span> <span class="op">*</span> priceYTM6)<span class="op">;</span></span>
<span id="cb2-211"><a href="#cb2-211" aria-hidden="true" tabindex="-1"></a><span class="co">//   let md = duration / (1+6/100);</span></span>
<span id="cb2-212"><a href="#cb2-212" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">let</span> ytm <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span> ytm <span class="op">&lt;</span> <span class="dv">20</span><span class="op">;</span> ytm<span class="op">+=</span><span class="fl">0.1</span>) {</span>
<span id="cb2-213"><a href="#cb2-213" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> price <span class="op">=</span> <span class="fu">pv</span>(coupon<span class="op">,</span> f<span class="op">,</span> maturity<span class="op">,</span> ytm<span class="op">/</span><span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb2-214"><a href="#cb2-214" aria-hidden="true" tabindex="-1"></a>    prices[<span class="st">"YTM"</span>]<span class="op">.</span><span class="fu">push</span>(ytm)<span class="op">;</span></span>
<span id="cb2-215"><a href="#cb2-215" aria-hidden="true" tabindex="-1"></a>    prices[<span class="st">"Price"</span>]<span class="op">.</span><span class="fu">push</span>(price)<span class="op">;</span></span>
<span id="cb2-216"><a href="#cb2-216" aria-hidden="true" tabindex="-1"></a>    prices[<span class="st">"PriceApproxByDuration"</span>]<span class="op">.</span><span class="fu">push</span>(<span class="op">-</span>priceYTM6<span class="op">*</span>duration<span class="op">*</span>(ytm<span class="op">-</span><span class="dv">6</span>)<span class="op">+</span>priceYTM6)<span class="op">;</span></span>
<span id="cb2-217"><a href="#cb2-217" aria-hidden="true" tabindex="-1"></a>    prices[<span class="st">"Duration"</span>]<span class="op">.</span><span class="fu">push</span>(duration<span class="op">*</span>priceYTM6)<span class="op">;</span></span>
<span id="cb2-218"><a href="#cb2-218" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-219"><a href="#cb2-219" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> prices<span class="op">;</span></span>
<span id="cb2-220"><a href="#cb2-220" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-221"><a href="#cb2-221" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="fu">transpose</span>(p)</span>
<span id="cb2-222"><a href="#cb2-222" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb2-223"><a href="#cb2-223" aria-hidden="true" tabindex="-1"></a>  <span class="dt">caption</span><span class="op">:</span> <span class="st">"Assume $100 bond, annual coupons paid in arrears and current YTM of 6%."</span><span class="op">,</span></span>
<span id="cb2-224"><a href="#cb2-224" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">padding</span><span class="op">:</span> <span class="fl">0.4</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"YTM (%)"</span>}<span class="op">,</span></span>
<span id="cb2-225"><a href="#cb2-225" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">200</span>]}<span class="op">,</span></span>
<span id="cb2-226"><a href="#cb2-226" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb2-227"><a href="#cb2-227" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb2-228"><a href="#cb2-228" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">100</span>])<span class="op">,</span></span>
<span id="cb2-229"><a href="#cb2-229" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleX</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">6</span>])<span class="op">,</span></span>
<span id="cb2-230"><a href="#cb2-230" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Plot.text(data, {x: 2, y: 20, text: (d) =&gt; ("Duration: " + d.Duration.toFixed(3)), textAnchor: "start", fontSize: 18}),</span></span>
<span id="cb2-231"><a href="#cb2-231" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">lineY</span>(data<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"YTM"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"Price"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"blue"</span>})<span class="op">,</span></span>
<span id="cb2-232"><a href="#cb2-232" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">lineY</span>(data<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"YTM"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"PriceApproxByDuration"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"red"</span>})<span class="op">,</span></span>
<span id="cb2-233"><a href="#cb2-233" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb2-234"><a href="#cb2-234" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-5" data-nodetype="expression">

</div>
</div>
</div>
</div>
<p>Mathematically, notice that bond price <span class="math inline">\(P\)</span> is a non-linear function <span class="math inline">\(f\)</span> of yield <span class="math inline">\(y\)</span> and many other parameters. Approximating <span class="math inline">\(\Delta P\)</span> using only its first partial derivative <span class="math inline">\(\frac{\partial P}{\partial y}\)</span> is of course not enough. We need to consider the second-order partial derivate, <span class="math inline">\(\frac{\partial^2 P}{\partial y^2}\)</span> too. This second derivative w.r.t. yield is exactly what we call the (dollar) <strong>convexity</strong> of a bond.</p>
<p><span class="math display">\[
\Delta P = \underbrace{\frac{\partial P}{\partial y}}_{\text{related to duration}} \cdot \partial y + \underbrace{\frac{1}{2}\frac{\partial^2 P}{\partial y^2}}_{\text{related to convexity}} \cdot (\partial y)^2
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled" title="Why does it work? -- Taylor Expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why does it work? – Taylor Expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>This is for the math-savvy. According to <a href="https://en.wikipedia.org/wiki/Taylor_series">Taylor Expansion</a>, the change in a function <span class="math inline">\(f\)</span>’s value at a point <span class="math inline">\(y\)</span> by <span class="math inline">\(\Delta y\)</span> is:</p>
<p><span class="math display">\[
f(y+\Delta y) - f(y) = f'(y) \Delta y + \frac{f''(y)}{2} (\Delta y)^2 + \cdots
\]</span></p>
<p>where higher order terms are ignored because they are too small.</p>
</div>
</div>
</div>
<p>As such, approximating a bond price’s change can be better achieved using both duration and convexity.</p>
<section id="impact-of-coupon-rate-on-convexity" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="impact-of-coupon-rate-on-convexity">Impact of coupon rate on convexity</h3>
<div class="callout callout-style-default callout-warning callout-titled" title="In the graph above, reduce coupon rate. What do you find?">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
In the graph above, reduce coupon rate. What do you find?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Adjusting only coupon rate, the bond’s yield and maturity stay unchanged. The bond price declines, duration goes up, though the slope of the tangent line at yield decreases.</p>
</div>
</div>
<p>For a given yield and maturity, the lower the coupon, the greater the convexity of a bond. This is because a greater portion of the bond value comes later, resulting a higher duration. A higher duration implies greater sensitivity of bond price to yield, so that for a given change in yield, the (percentage) change in price is greater – the bond’s convexity is higher.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;Note that it does not necessarily mean that the price-yield curve is more convex! In the graph above, if we reduce coupon rate, the curve seems less convex than the baseline curve, but the low-coupon bond’s convexity is higher. Remember we need to scaled by the bond price, and the low-coupon bond’s price is lower.</p></div></div></section>
</section>
<section id="approximating-duration-and-convexity" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="approximating-duration-and-convexity">Approximating duration and convexity</h2>
<p>When a bond has embedded options, an analytical solution of bond price can be hard or impossible to get. The lack of an exact bond price function means that we will not be able to compute its partial derivatives, and we have to use approximations to gauge its duration and convexity.</p>
<section id="duration-approximation" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="duration-approximation">Duration approximation</h3>
<p>Conceptually, (modified) duration captures the change in bond price given a small change in yield. So, we can approximate a bond’s duration by computing<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> the average price changes given a small change in yield in both directions:</p>
<div class="no-row-height column-margin column-container"><div id="fn2"><p><sup>2</sup>&nbsp;If the exact pricing function is not available due to complex embedded options, we can try to use Monte Carlo simulations to compute an expected value.</p></div></div><p><span class="math display">\[
\begin{align*}
\text{approx. Modified Duration} &amp;= \underbrace{\frac{1}{2} \left[\frac{P_{-}-P_0}{P_0} + \frac{P_0 - P_+}{P_0}\right]}_{\text{avg. pct. price change}} \times \underbrace{\frac{1}{\Delta y}}_{\text{per change in yield}} \\
&amp;= \frac{P_--P_+}{2P_0\cdot \Delta y}
\end{align*}
\]</span></p>
</section>
<section id="convexity-approximation" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="convexity-approximation">Convexity approximation</h3>
<p>Similarly and conceptually, bond convexity captures the asymmetric changes in price given a small change in yield to the positive and to the negative directions. So, we can approximate a bond’s (dollar) convexity by computing<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> the difference in price changes given a small change in yield in both directions:</p>
<div class="no-row-height column-margin column-container"><div id="fn3"><p><sup>3</sup>&nbsp;Or by simulation.</p></div></div><p><span class="math display">\[
\begin{align*}
\text{approx. Convexity} &amp;= \underbrace{\left[\frac{P_{-}-P_0}{\Delta y} - \frac{P_0 - P_+}{\Delta y}\right]}_{\text{diff. in price changes given yield change}} \times \underbrace{\frac{1}{\Delta y}}_{\text{per change in yield}} \\
&amp;= \frac{P_-+P_+-2P_0}{(\Delta y)^2}
\end{align*}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled" title="Real world application">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Real world application
</div>
</div>
<div class="callout-body-container callout-body">
<p>Imagine you’re a manager of a bond portfolio. Some bonds in the portfolio are exotic and have complex embedded options: this is very common.</p>
<p>How do you understand the risk of the portfolio, in terms of its value sensitivity to yield?</p>
<p>You can have a powerful computer program that continuously compute the approximate duration and convexity of each bond in the portfolio, perhaps using Monte Carlo simulations to value those bonds with embedded options. Therefore, you can have a real-time measure of the portfolio’s risk exposure to yield changes.</p>
</div>
</div>


</section>
</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IiBcclxudmlld29mIG1hdHVyaXR5NCA9IElucHV0cy5yYW5nZShcclxuICBbMSwgMzBdLCBcclxuICB7dmFsdWU6IDE1LCBzdGVwOiAxLCBsYWJlbDogXCJNYXR1cml0eSAoeWVhcnMpOlwifVxyXG4pXHJcbnZpZXdvZiBjb3Vwb25SYXRlNCA9IElucHV0cy5yYW5nZShcclxuICAgIFswLjAxLCAwLjJdLFxyXG4gICAge3ZhbHVlOiAwLjA1LCBzdGVwOiAwLjAxLCBsYWJlbDpcIkNvdXBvbiByYXRlOlwifVxyXG4pXHJcbmQgPSB7XHJcbiAgY29uc3QgZiA9IDEwMDtcclxuICBsZXQgYywgbTtcclxuICBjID0gY291cG9uUmF0ZTQ7XHJcbiAgbSA9IG1hdHVyaXR5NDtcclxuICBmdW5jdGlvbiBwdihjLCBmLCB0LCByKSB7XHJcbiAgICByZXR1cm4gYyAqICgxIC0gKDErcikqKigtdCkpIC8gciArIGYgLyAoMStyKSoqKHQpXHJcbiAgfVxyXG4gIGNvbnN0IHByaWNlcyA9IHtcIllUTVwiOiBbXSwgXCJQcmljZVwiOiBbXX07XHJcbiAgbGV0IGNvdXBvbiA9IGYgKiBjO1xyXG4gIGZvciAobGV0IHl0bSA9IDAuMDE7IHl0bSA8IDIwOyB5dG0rKykge1xyXG4gICAgbGV0IHByaWNlID0gcHYoY291cG9uLCBmLCBtLCB5dG0vMTAwKTtcclxuICAgIHByaWNlc1tcIllUTVwiXS5wdXNoKHl0bSk7XHJcbiAgICBwcmljZXNbXCJQcmljZVwiXS5wdXNoKHByaWNlKTtcclxuICB9XHJcbiAgcmV0dXJuIHByaWNlcztcclxufVxyXG5cclxuZGF0YTQgPSB0cmFuc3Bvc2UoZClcclxuUGxvdC5wbG90KHtcclxuICBjYXB0aW9uOiBcIkFzc3VtZSAkMTAwIGJvbmQsIGFubnVhbCBjb3Vwb25zIHBhaWQgaW4gYXJyZWFycyBhbmQgZWZmZWN0aXZlIGFubnVhbCBkaXNjb3VudCByYXRlLlwiLFxyXG4gIHg6IHtwYWRkaW5nOiAwLjQsIGxhYmVsOiBcIllUTSAoJSlcIn0sXHJcbiAgZ3JpZDogdHJ1ZSxcclxuICBtYXJrczogW1xyXG4gICAgUGxvdC5ydWxlWShbMCwgMTAwXSksXHJcbiAgICBQbG90LnJ1bGVYKFswXSksXHJcbiAgICBQbG90LmxpbmVZKGRhdGE0LCB7eDogXCJZVE1cIiwgeTogXCJQcmljZVwiLCBzdHJva2U6IFwiYmx1ZVwifSksXHJcbiAgXVxyXG59KVxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiIgXHJcbnZpZXdvZiBtYXR1cml0eSA9IElucHV0cy5yYW5nZShcclxuICBbMSwgMzBdLCBcclxuICB7dmFsdWU6IDE1LCBzdGVwOiAxLCBsYWJlbDogXCJNYXR1cml0eSAoeWVhcnMpOlwifVxyXG4pXHJcbnZpZXdvZiBjb3Vwb25SYXRlID0gSW5wdXRzLnJhbmdlKFxyXG4gICAgWzAuMDEsIDAuMl0sXHJcbiAgICB7dmFsdWU6IDAuMDYsIHN0ZXA6IDAuMDEsIGxhYmVsOlwiQ291cG9uIHJhdGU6XCJ9XHJcbilcclxucCA9IHtcclxuICBjb25zdCBmID0gMTAwO1xyXG4gIGZ1bmN0aW9uIHB2KGMsIGYsIHQsIHIpIHtcclxuICAgIHJldHVybiBjICogKDEgLSAoMStyKSoqKC10KSkgLyByICsgZiAvICgxK3IpKioodClcclxuICB9XHJcbiAgY29uc3QgcHJpY2VzID0ge1wiWVRNXCI6IFtdLCBcIlByaWNlXCI6IFtdLCBcIlByaWNlQXBwcm94QnlEdXJhdGlvblwiOiBbXSwgXCJEdXJhdGlvblwiOiBbXX07XHJcbiAgbGV0IGNvdXBvbiA9IGYgKiBjb3Vwb25SYXRlO1xyXG4gIGxldCBwcmljZVlUTTYgPSBwdihjb3Vwb24sIGYsIG1hdHVyaXR5LCA2LzEwMCk7XHJcbiAgbGV0IHByaWNlWVRNNl9wMDEgPSBwdihjb3Vwb24sIGYsIG1hdHVyaXR5LCA2LjAxLzEwMCk7XHJcbiAgbGV0IHByaWNlWVRNNl9tMDEgPSBwdihjb3Vwb24sIGYsIG1hdHVyaXR5LCA1Ljk5LzEwMCk7XHJcbiAgbGV0IGR1cmF0aW9uID0gKHByaWNlWVRNNl9tMDEgLSBwcmljZVlUTTZfcDAxKSAvICgyICogMC4wMSAqIHByaWNlWVRNNik7XHJcbi8vICAgbGV0IG1kID0gZHVyYXRpb24gLyAoMSs2LzEwMCk7XHJcbiAgZm9yIChsZXQgeXRtID0gMC4xOyB5dG0gPCAyMDsgeXRtKz0wLjEpIHtcclxuICAgIGxldCBwcmljZSA9IHB2KGNvdXBvbiwgZiwgbWF0dXJpdHksIHl0bS8xMDApO1xyXG4gICAgcHJpY2VzW1wiWVRNXCJdLnB1c2goeXRtKTtcclxuICAgIHByaWNlc1tcIlByaWNlXCJdLnB1c2gocHJpY2UpO1xyXG4gICAgcHJpY2VzW1wiUHJpY2VBcHByb3hCeUR1cmF0aW9uXCJdLnB1c2goLXByaWNlWVRNNipkdXJhdGlvbiooeXRtLTYpK3ByaWNlWVRNNik7XHJcbiAgICBwcmljZXNbXCJEdXJhdGlvblwiXS5wdXNoKGR1cmF0aW9uKnByaWNlWVRNNik7XHJcbiAgfVxyXG4gIHJldHVybiBwcmljZXM7XHJcbn1cclxuZGF0YSA9IHRyYW5zcG9zZShwKVxyXG5QbG90LnBsb3Qoe1xyXG4gIGNhcHRpb246IFwiQXNzdW1lICQxMDAgYm9uZCwgYW5udWFsIGNvdXBvbnMgcGFpZCBpbiBhcnJlYXJzIGFuZCBjdXJyZW50IFlUTSBvZiA2JS5cIixcclxuICB4OiB7cGFkZGluZzogMC40LCBsYWJlbDogXCJZVE0gKCUpXCJ9LFxyXG4gIHk6IHtkb21haW46IFswLCAyMDBdfSxcclxuICBncmlkOiB0cnVlLFxyXG4gIG1hcmtzOiBbXHJcbiAgICBQbG90LnJ1bGVZKFswLCAxMDBdKSxcclxuICAgIFBsb3QucnVsZVgoWzAsIDZdKSxcclxuICAgIC8vIFBsb3QudGV4dChkYXRhLCB7eDogMiwgeTogMjAsIHRleHQ6IChkKSA9PiAoXCJEdXJhdGlvbjogXCIgKyBkLkR1cmF0aW9uLnRvRml4ZWQoMykpLCB0ZXh0QW5jaG9yOiBcInN0YXJ0XCIsIGZvbnRTaXplOiAxOH0pLFxyXG4gICAgUGxvdC5saW5lWShkYXRhLCB7eDogXCJZVE1cIiwgeTogXCJQcmljZVwiLCBzdHJva2U6IFwiYmx1ZVwifSksXHJcbiAgICBQbG90LmxpbmVZKGRhdGEsIHt4OiBcIllUTVwiLCB5OiBcIlByaWNlQXBwcm94QnlEdXJhdGlvblwiLCBzdHJva2U6IFwicmVkXCJ9KSxcclxuICBdXHJcbn0pXHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnbWF0dXJpdHk0JykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ2NvdXBvblJhdGU0JykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ21hdHVyaXR5JykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ2NvdXBvblJhdGUnKSJ9XX0=
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../posts/fixed-income/bond-price-volatility";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/mingze-gao\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="mgao6767/mingze-gao" data-repo-id="MDEwOlJlcG9zaXRvcnkyODEwMTIwMjk=" data-category="Comments" data-category-id="DIC_kwDOEL_nPc4CgWgL" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" data-loading="lazy" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright © 2019 - 2024 Mingze Gao</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mgao6767">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/AdrianMingzeGao">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/adriangao/">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:mingze.gao@mq.edu.au">
      <i class="bi bi-send" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>